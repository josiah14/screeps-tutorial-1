{"version":3,"sources":["processor.js"],"names":["q","require","_","movement","utils","driver","getDriver","C","constants","config","roomsQueue","usersQueue","lastRoomsStatsSaveTime","currentHistoryPromise","when","processRoom","roomId","intents","objects","terrain","gameTime","roomInfo","flags","then","bulk","bulkObjectsWrite","userBulk","bulkUsersWrite","flagsBulk","bulkFlagsWrite","oldObjects","roomController","hasNewbieWalls","stats","getRoomStatsUpdater","objectsToHistory","roomSpawns","roomExtensions","oldRoomInfo","clone","active","terrainItem","findKey","forEach","object","type","_actionLog","actionLog","_ticksToLive","ageTime","attacked","healed","attack","rangedAttack","rangedMassAttack","rangedHeal","harvest","heal","repair","build","say","upgradeController","reserveController","transferEnergy","runReaction","observeRoom","user","userNotActive","decayTime","push","emit","length","init","users","userIntents","userId","objectsManual","extend","objectId","objectIntents","_skip","remove","setPublic","send","launchNuke","roomName","transfer","unclaim","activateSafeMode","notifyWhenAttacked","CONSTRUCTION_COST","update","enabled","check","safeMode","energyAvailable","filter","i","off","sum","mapView","w","r","pb","p","s","c","m","k","resultPromises","userVisibility","energyCapacity","level","CONTROLLER_STRUCTURES","storage","STORAGE_CAPACITY","_id","JSON","parse","stringify","isPublic","newbieWall","x","y","resourceType","mapViewSave","execute","isEqual","saveRoomInfo","saveRoomHistory","Date","now","roomsStatsSave","all","promise","historyChunkSize","baseTime","Math","floor","history","upload","data","saveTick","connect","queue","create","_roomsQueue","loop","fetch","_roomId","getRoomIntents","getRoomObjects","getRoomTerrain","getGameTime","getRoomInfo","getRoomFlags","result","catch","error","console","log","isObject","stack","clearRoomIntents","markDone","setTimeout","self","setInterval","rejections","getUnhandledReasons","resetUnhandledRejections"],"mappings":"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","file":"../processor.js","sourceRoot":"/src"}