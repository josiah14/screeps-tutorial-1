{"version":3,"sources":["game/rooms.js"],"names":["_","require","utils","driver","getDriver","C","constants","pathfinding","abs","Math","min","max","runtimeData","intents","register","globals","positionsSetCacheCounter","createdFlagNames","createdSpawnNames","privateStore","createdConstructionSites","getPathfinder","id","opts","defaults","maxOps","heuristicWeight","key","pfFinders","AStarFinder","diagonalMovement","maxOpsLimit","heuristic","Heuristic","chebyshev","weight","makePathfindingGrid","endNodesKey","rows","Array","obstacleTypes","clone","OBSTACLE_OBJECT_TYPES","ignoreDestructibleStructures","without","ignoreCreeps","y","x","terrainCode","staticTerrainData","TERRAIN_MASK_WALL","TERRAIN_MASK_SWAMP","objectsByRoomKeys","forEach","object","objectsByRoom","contains","type","isPublic","user","_id","structureType","ignore","isArray","Error","i","pos","isObject","isUndefined","RoomPosition","avoid","pfEndNodes","Grid","getPathfindingGrid","gridName","isNumber","positionsSetCache","pfGrid","makePathfindingGrid2","costs","PathFinder","CostMatrix","push","rooms","controller","safeMode","my","set","get","ignoreRoads","getPathfindingGrid2","_findPath2","fromPos","toPos","isEqualTo","serialize","deprecated","undefined","maxRooms","roomName","searchOpts","roomCallback","costMatrix","costCallback","resultMatrix","plainCost","swampCost","ret","search","range","path","length","isNearTo","curX","curY","resultPath","result","dx","dy","direction","getDirection","serializePath","_findClosestByPath2","objects","find","filter","objectOnSquare","obj","goals","map","lastPos","exports","make","_runtimeData","_intents","_register","_globals","Room","data","wrapFn","objectData","gameInfo","gameId","match","games","name","mode","MODE_SIMULATION","test","MODE_ARENA","MODE_SURVIVAL","MODE_WORLD","energyAvailable","energyCapacityAvailable","survivalInfo","pfDijkstraFinder","DijkstraFinder","pathCache","cache","array","positionsArray","findKey","every","j","any","parseInt","lookTypeRegisters","creep","byRoom","creeps","energy","resource","source","sources","mineral","minerals","structure","structures","flag","flags","constructionSite","constructionSites","nuke","nukes","lookTypeSpatialRegisters","spatial","visual","RoomVisual","deserializePath","str","prototype","toString","toJSON","Object","defineProperty","Memory","value","FIND_DROPPED_ENERGY","FIND_DROPPED_RESOURCES","findCache","FIND_EXIT","FIND_EXIT_TOP","concat","FIND_EXIT_BOTTOM","FIND_EXIT_RIGHT","FIND_EXIT_LEFT","exits","reduce","accum","getPositionAt","_lookSpatialRegister","typeName","outArray","withCoords","item","terrain","typeResult","_lookAreaMixedRegister","top","left","bottom","right","withType","asArray","typeRegister","keys","checkInside","lookAt","firstArg","secondArg","fetchXYArguments","LOOK_CREEPS","LOOK_ENERGY","LOOK_RESOURCES","LOOK_SOURCES","LOOK_MINERALS","LOOK_STRUCTURES","LOOK_FLAGS","LOOK_CONSTRUCTION_SITES","LOOK_TERRAIN","LOOK_NUKES","lookForAt","ERR_INVALID_ARGS","lookAtArea","lookForAtArea","findPath","_useNewPathFinder","fromX","fromY","cacheKeySuffix","grid","toX","toY","cacheKey","cloneDeep","finder","setWalkableAt","splice","step","lastStep","createFlag","color","secondaryColor","size","Game","FLAGS_LIMIT","ERR_FULL","COLOR_WHITE","COLORS_ALL","cnt","indexOf","ERR_NAME_EXISTS","Flag","pushByName","createConstructionSite","isString","CONSTRUCTION_COST","level","ERR_RCL_NOT_ENOUGH","checkControllerAvailability","checkConstructionSite","ERR_INVALID_TARGET","userObjects","MAX_CONSTRUCTION_SITES","intent","spawns","OK","getEndNodes","findExitTo","room","findExit","circle","style","console","addVisual","t","s","line","x1","y1","x2","y2","rect","w","h","poly","points","text","getSize","getVisualSize","clear","clearVisual","makePos","isNaN","inRangeTo","thirdArg","getDirectionTo","findPathTo","exitDir","exit","findClosestByPath","isNear","endNodes","algorithm","minH","sumH","distance","lastStepPos","findInRange","findClosestByRange","closest","minRange","Infinity","getRangeTo","look","lookFor","getTerrainAt","RoomObject"],"mappings":";;;;;;;;AAAA,IAAIA,IAAIC,QAAQ,QAAR,CAAR;AAAA,IACIC,QAAQD,QAAQ,YAAR,CADZ;AAAA,IAEIE,SAASD,MAAME,SAAN,EAFb;AAAA,IAGIC,IAAIF,OAAOG,SAHf;AAAA,IAIIC,cAAcN,QAAQ,sBAAR,CAJlB;;AAMA,IAAIO,MAAMC,KAAKD,GAAf;AAAA,IAAoBE,MAAMD,KAAKC,GAA/B;AAAA,IAAoCC,MAAMF,KAAKE,GAA/C;;AAEA,IAAIC,WAAJ,EAAiBC,OAAjB,EAA0BC,QAA1B,EAAoCC,OAApC;;AAEA,IAAIC,wBAAJ,EAA8BC,gBAA9B,EAAgDC,iBAAhD,EAAmEC,YAAnE,EAAiFC,wBAAjF;;AAEA,SAASC,aAAT,CAAuBC,EAAvB,EAA2BC,IAA3B,EAAiC;AAC7BA,WAAOA,QAAQ,EAAf;AACAvB,MAAEwB,QAAF,CAAWD,IAAX,EAAiB,EAACE,QAAQ,IAAT,EAAeC,iBAAiB,CAAhC,EAAjB;AACA,QAAIC,MAASJ,KAAKE,MAAd,SAAwBF,KAAKG,eAAjC;;AAEA,QAAG,CAACP,aAAaG,EAAb,EAAiBM,SAAjB,CAA2BD,GAA3B,CAAJ,EAAqC;AACjCR,qBAAaG,EAAb,EAAiBM,SAAjB,CAA2BD,GAA3B,IAAkC,IAAIpB,YAAYsB,WAAhB,CAA4B;AAC1DC,8BAAkB,CADwC;AAE1DC,yBAAaR,KAAKE,MAFwC;AAG1DO,uBAAWzB,YAAY0B,SAAZ,CAAsBC,SAHyB;AAI1DC,oBAAQZ,KAAKG;AAJ6C,SAA5B,CAAlC;AAMH;AACD,WAAOP,aAAaG,EAAb,EAAiBM,SAAjB,CAA2BD,GAA3B,CAAP;AACH;;AAED,SAASS,mBAAT,CAA6Bd,EAA7B,EAAiCC,IAAjC,EAAuCc,WAAvC,EAAoD;;AAEhDd,WAAOA,QAAQ,EAAf;;AAEA,QAAIe,OAAO,IAAIC,KAAJ,CAAU,EAAV,CAAX;AAAA,QACAC,gBAAgBxC,EAAEyC,KAAF,CAAQpC,EAAEqC,qBAAV,CADhB;;AAGA,QAAGnB,KAAKoB,4BAAR,EAAsC;AAClCH,wBAAgBxC,EAAE4C,OAAF,CAAUJ,aAAV,EAAyB,iBAAzB,EAA2C,OAA3C,EAAmD,WAAnD,EAAgE,MAAhE,EAAuE,SAAvE,EAAiF,UAAjF,EAA4F,OAA5F,EAAoG,WAApG,EAAgH,YAAhH,EAA6H,KAA7H,EAAmI,UAAnI,CAAhB;AACH;AACD,QAAGjB,KAAKsB,YAAR,EAAsB;AAClBL,wBAAgBxC,EAAE4C,OAAF,CAAUJ,aAAV,EAAyB,OAAzB,CAAhB;AACH;;AAED,SAAI,IAAIM,IAAE,CAAV,EAAaA,IAAE,EAAf,EAAmBA,GAAnB,EAAwB;AACpBR,aAAKQ,CAAL,IAAU,IAAIP,KAAJ,CAAU,EAAV,CAAV;AACA,aAAI,IAAIQ,IAAE,CAAV,EAAaA,IAAE,EAAf,EAAmBA,GAAnB,EAAwB;AACpBT,iBAAKQ,CAAL,EAAQC,CAAR,IAAaA,KAAK,CAAL,IAAUD,KAAK,CAAf,IAAoBC,KAAK,EAAzB,IAA+BD,KAAK,EAApC,GAAyC,EAAzC,GAA8C,CAA3D;AACA;AACA,gBAAIE,cAAcpC,YAAYqC,iBAAZ,CAA8B3B,EAA9B,EAAkCwB,IAAE,EAAF,GAAKC,CAAvC,CAAlB;AACA,gBAAGC,cAAc3C,EAAE6C,iBAAnB,EAAsC;AAClCZ,qBAAKQ,CAAL,EAAQC,CAAR,IAAa,CAAb;AACH;AACD,gBAAKC,cAAc3C,EAAE8C,kBAAjB,IAAwCb,KAAKQ,CAAL,EAAQC,CAAR,KAAc,CAA1D,EAA6D;AACzDT,qBAAKQ,CAAL,EAAQC,CAAR,IAAa,EAAb;AACH;AACJ;AACJ;;AAEDjC,aAASsC,iBAAT,CAA2B9B,EAA3B,EAA+B+B,OAA/B,CAAuC,UAAC1B,GAAD,EAAS;AAC5C,YAAI2B,SAASxC,SAASyC,aAAT,CAAuBjC,EAAvB,EAA2BK,GAA3B,CAAb;;AAEA,YAAI3B,EAAEwD,QAAF,CAAWhB,aAAX,EAA0Bc,OAAOG,IAAjC,KACJ,CAAClC,KAAKoB,4BAAN,IAAsCW,OAAOG,IAAP,IAAe,SAArD,IAAkE,CAACH,OAAOI,QAA1E,IAAsFJ,OAAOK,IAAP,IAAe/C,YAAY+C,IAAZ,CAAiBC,GADlH,IAEJ,CAACrC,KAAKoB,4BAAN,IAAsCW,OAAOG,IAAP,IAAe,kBAArD,IAA2EH,OAAOK,IAAP,IAAe/C,YAAY+C,IAAZ,CAAiBC,GAA3G,IAAkH5D,EAAEwD,QAAF,CAAWnD,EAAEqC,qBAAb,EAAoCY,OAAOO,aAA3C,CAFlH,EAE6K;;AAEzKvB,iBAAKgB,OAAOR,CAAZ,EAAeQ,OAAOP,CAAtB,IAA2B,CAA3B;AACH;;AAED,YAAIO,OAAOG,IAAP,IAAe,MAAf,IAAyBnB,KAAKgB,OAAOR,CAAZ,EAAeQ,OAAOP,CAAtB,IAA2B,CAAxD,EAA2D;AACvDT,iBAAKgB,OAAOR,CAAZ,EAAeQ,OAAOP,CAAtB,IAA2B,CAA3B;AACH;AACJ,KAbD;;AAgBA,QAAGxB,KAAKuC,MAAR,EAAgB;AACZ,YAAG,CAAC9D,EAAE+D,OAAF,CAAUxC,KAAKuC,MAAf,CAAJ,EAA4B;AACxB,kBAAM,IAAIE,KAAJ,CAAU,iCAAV,CAAN;AACH;AACDhE,UAAEqD,OAAF,CAAU9B,KAAKuC,MAAf,EAAuB,UAACG,CAAD,EAAItC,GAAJ,EAAY;AAC/B,gBAAG,CAACsC,CAAJ,EAAO;AACH;AACH;AACD,gBAAGA,EAAEC,GAAL,EAAU;AACN5B,qBAAK2B,EAAEC,GAAF,CAAMpB,CAAX,EAAcmB,EAAEC,GAAF,CAAMnB,CAApB,IAAyBT,KAAK2B,EAAEC,GAAF,CAAMpB,CAAX,EAAcmB,EAAEC,GAAF,CAAMnB,CAApB,IAAyB,CAAzB,GAA6B,CAA7B,GAAiCT,KAAK2B,EAAEC,GAAF,CAAMpB,CAAX,EAAcmB,EAAEC,GAAF,CAAMnB,CAApB,CAA1D;AACH;AACD,gBAAG/C,EAAEmE,QAAF,CAAWF,CAAX,KAAiB,CAACjE,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAlB,IAAwC,EAAEkB,aAAalD,QAAQsD,YAAvB,CAA3C,EAAiF;AAC7E9C,qBAAKuC,MAAL,CAAYnC,GAAZ,IAAmB,IAAIZ,QAAQsD,YAAZ,CAAyBJ,EAAElB,CAA3B,EAA8BkB,EAAEnB,CAAhC,EAAmCxB,EAAnC,CAAnB;AACH;AACD,gBAAG,CAACtB,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAJ,EAAwB;AACpBT,qBAAK2B,EAAEnB,CAAP,EAAUmB,EAAElB,CAAZ,IAAiBT,KAAK2B,EAAEnB,CAAP,EAAUmB,EAAElB,CAAZ,IAAiB,CAAjB,GAAqB,CAArB,GAAyBT,KAAK2B,EAAEnB,CAAP,EAAUmB,EAAElB,CAAZ,CAA1C;AACH;AACJ,SAbD;AAcH;;AAED,QAAGxB,KAAK+C,KAAR,EAAe;AACX,YAAG,CAACtE,EAAE+D,OAAF,CAAUxC,KAAK+C,KAAf,CAAJ,EAA2B;AACvB,kBAAM,IAAIN,KAAJ,CAAU,gCAAV,CAAN;AACH;AACDhE,UAAEqD,OAAF,CAAU9B,KAAK+C,KAAf,EAAsB,UAACL,CAAD,EAAItC,GAAJ,EAAY;AAC9B,gBAAG,CAACsC,CAAJ,EAAO;AACH;AACH;AACD,gBAAGA,EAAEC,GAAL,EAAU;AACN5B,qBAAK2B,EAAEC,GAAF,CAAMpB,CAAX,EAAcmB,EAAEC,GAAF,CAAMnB,CAApB,IAAyB,CAAzB;AACH;AACD,gBAAG/C,EAAEmE,QAAF,CAAWF,CAAX,KAAiB,CAACjE,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAlB,IAAwC,EAAEkB,aAAalD,QAAQsD,YAAvB,CAA3C,EAAiF;AAC7E9C,qBAAK+C,KAAL,CAAW3C,GAAX,IAAkB,IAAIZ,QAAQsD,YAAZ,CAAyBJ,EAAElB,CAA3B,EAA8BkB,EAAEnB,CAAhC,EAAmCxB,EAAnC,CAAlB;AACH;AACD,gBAAG,CAACtB,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAJ,EAAwB;AACpBT,qBAAK2B,EAAEnB,CAAP,EAAUmB,EAAElB,CAAZ,IAAiB,CAAjB;AACH;AACJ,SAbD;AAcH;AACD,QAAGV,WAAH,EAAgB;AACZrC,UAAEqD,OAAF,CAAUlC,aAAaG,EAAb,EAAiBiD,UAAjB,CAA4BlC,WAA5B,CAAV,EAAoD,UAAC4B,CAAD,EAAO;AACvD,gBAAG,CAACjE,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAJ,EAAwB;AACpBT,qBAAK2B,EAAEnB,CAAP,EAAUmB,EAAElB,CAAZ,IAAiB,GAAjB;AACH,aAFD,MAGK,IAAG,CAAC/C,EAAEoE,WAAF,CAAcH,EAAEC,GAAhB,CAAJ,EAA0B;AAC3B5B,qBAAK2B,EAAEC,GAAF,CAAMpB,CAAX,EAAcmB,EAAEC,GAAF,CAAMnB,CAApB,IAAyB,GAAzB;AACH;AACJ,SAPD;AAQH;;AAED,WAAO,IAAIxC,YAAYiE,IAAhB,CAAqB,EAArB,EAAyB,EAAzB,EAA6BlC,IAA7B,CAAP;AACH;;AAED,SAASmC,kBAAT,CAA4BnD,EAA5B,EAAgCC,IAAhC,EAAsCc,WAAtC,EAAmD;;AAE/C,QAAIqC,WAAW,MAAf;;AAEAnD,WAAOA,QAAQ,EAAf;;AAEA,QAAGA,KAAKsB,YAAR,EAAsB;AAClB6B,oBAAY,eAAZ;AACH;AACD,QAAGnD,KAAKoB,4BAAR,EAAsC;AAClC+B,oBAAY,+BAAZ;AACH;AACD,QAAG1E,EAAE2E,QAAF,CAAWtC,WAAX,CAAH,EAA4B;AACxBqC,oBAAY,cAAYrC,WAAxB;AACH;AACD,QAAGd,KAAK+C,KAAR,EAAe;AACXI,oBAAY,WAASvD,aAAaG,EAAb,EAAiBsD,iBAAjB,CAAmCjD,GAAnC,CAAuCJ,KAAK+C,KAA5C,CAArB;AACH;AACD,QAAG/C,KAAKuC,MAAR,EAAgB;AACZY,oBAAY,YAAUvD,aAAaG,EAAb,EAAiBsD,iBAAjB,CAAmCjD,GAAnC,CAAuCJ,KAAKuC,MAA5C,CAAtB;AACH;;AAED,QAAG,CAAC3C,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,CAAJ,EAAuCvD,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,IAAoCtC,oBAAoBd,EAApB,EAAwBC,IAAxB,EAA8Bc,WAA9B,CAApC;;AAEvC,WAAOlB,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,EAAkCjC,KAAlC,EAAP;AACH;;AAED,SAASqC,oBAAT,CAA8BxD,EAA9B,EAAkCC,IAAlC,EAAwC;;AAEpCA,WAAOA,QAAQ,EAAf;;AAEA,QAAIwD,QAAQ,IAAIhE,QAAQiE,UAAR,CAAmBC,UAAvB,EAAZ;;AAEA,QAAIzC,gBAAgBxC,EAAEyC,KAAF,CAAQpC,EAAEqC,qBAAV,CAApB;AACAF,kBAAc0C,IAAd,CAAmB,QAAnB;;AAEA,QAAG3D,KAAKoB,4BAAR,EAAsC;AAClCH,wBAAgBxC,EAAE4C,OAAF,CAAUJ,aAAV,EAAyB,iBAAzB,EAA2C,OAA3C,EAAmD,WAAnD,EAAgE,MAAhE,EAAuE,SAAvE,EAAiF,UAAjF,EAA4F,OAA5F,EAAoG,WAApG,EAAgH,YAAhH,EAA6H,KAA7H,EAAmI,UAAnI,CAAhB;AACH;AACD,QAAGjB,KAAKsB,YAAL,IAAqB/B,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAnB,IAAiCtE,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAnB,CAA8BC,QAA/D,IAA2EvE,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAnB,CAA8BE,EAAjI,EAAqI;AACjI9C,wBAAgBxC,EAAE4C,OAAF,CAAUJ,aAAV,EAAyB,OAAzB,CAAhB;AACH;;AAED,QAAG1B,SAASsC,iBAAT,CAA2B9B,EAA3B,CAAH,EAAmC;AAC/BR,iBAASsC,iBAAT,CAA2B9B,EAA3B,EAA+B+B,OAA/B,CAAuC,UAAC1B,GAAD,EAAS;AAC5C,gBAAI2B,SAASxC,SAASyC,aAAT,CAAuBjC,EAAvB,EAA2BK,GAA3B,CAAb;;AAEA,gBAAI3B,EAAEwD,QAAF,CAAWhB,aAAX,EAA0Bc,OAAOG,IAAjC,KACJ,CAAClC,KAAKsB,YAAN,IAAsB/B,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAzC,IAAuDtE,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAnB,CAA8BC,QAArF,IAAiGvE,SAASqE,KAAT,CAAe7D,EAAf,EAAmB8D,UAAnB,CAA8BE,EAA/H,IAAqIhC,OAAOG,IAAP,IAAe,OAApJ,IAA+JH,OAAOK,IAAP,IAAe/C,YAAY+C,IAAZ,CAAiBC,GAD3L,IAEJ,CAACrC,KAAKoB,4BAAN,IAAsCW,OAAOG,IAAP,IAAe,SAArD,IAAkE,CAACH,OAAOI,QAA1E,IAAsFJ,OAAOK,IAAP,IAAe/C,YAAY+C,IAAZ,CAAiBC,GAFlH,IAGJ,CAACrC,KAAKoB,4BAAN,IAAsCW,OAAOG,IAAP,IAAe,kBAArD,IAA2EH,OAAOK,IAAP,IAAe/C,YAAY+C,IAAZ,CAAiBC,GAA3G,IAAkH5D,EAAEwD,QAAF,CAAWnD,EAAEqC,qBAAb,EAAoCY,OAAOO,aAA3C,CAHlH,EAG6K;;AAEzKkB,sBAAMQ,GAAN,CAAUjC,OAAOP,CAAjB,EAAoBO,OAAOR,CAA3B,EAA8B,IAA9B;AACH;;AAED,gBAAIQ,OAAOG,IAAP,IAAe,OAAf,IAA0BsB,MAAMS,GAAN,CAAUlC,OAAOP,CAAjB,EAAoBO,OAAOR,CAA3B,KAAiC,CAA/D,EAAkE;AAC9DiC,sBAAMQ,GAAN,CAAUjC,OAAOP,CAAjB,EAAoBO,OAAOR,CAA3B,EAA8BvB,KAAKkE,WAAL,GAAmB,CAAnB,GAAuB,EAArD;AACH;;AAED,gBAAI,CAAClE,KAAKkE,WAAN,IAAqBnC,OAAOG,IAAP,IAAe,MAApC,IAA8CsB,MAAMS,GAAN,CAAUlC,OAAOP,CAAjB,EAAoBO,OAAOR,CAA3B,IAAgC,IAAlF,EAAwF;AACpFiC,sBAAMQ,GAAN,CAAUjC,OAAOP,CAAjB,EAAoBO,OAAOR,CAA3B,EAA8B,CAA9B;AACH;AACJ,SAlBD;AAmBH;;AAED,WAAOiC,KAAP;AACH;;AAED,SAASW,mBAAT,CAA6BpE,EAA7B,EAAiCC,IAAjC,EAAuC;;AAEnC,QAAG,CAACJ,aAAaG,EAAb,CAAJ,EAAsB;AAClB,eAAO,IAAIP,QAAQiE,UAAR,CAAmBC,UAAvB,EAAP;AACH;;AAED,QAAIP,WAAW,OAAf;;AAEAnD,WAAOA,QAAQ,EAAf;;AAEA,QAAGA,KAAKsB,YAAR,EAAsB;AAClB6B,oBAAY,eAAZ;AACH;AACD,QAAGnD,KAAKoB,4BAAR,EAAsC;AAClC+B,oBAAY,+BAAZ;AACH;AACD,QAAGnD,KAAKkE,WAAR,EAAqB;AACjBf,oBAAY,cAAZ;AACH;;AAED,QAAG,CAACvD,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,CAAJ,EAAuCvD,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,IAAoCI,qBAAqBxD,EAArB,EAAyBC,IAAzB,CAApC;;AAEvC,WAAOJ,aAAaG,EAAb,EAAiBuD,MAAjB,CAAwBH,QAAxB,CAAP;AACH;;AAED,SAASiB,UAAT,CAAoBrE,EAApB,EAAwBsE,OAAxB,EAAiCC,KAAjC,EAAwCtE,IAAxC,EAA8C;;AAE1CA,WAAOA,QAAQ,EAAf;;AAEA,QAAGqE,QAAQE,SAAR,CAAkBD,KAAlB,CAAH,EAA6B;AACzB,eAAOtE,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;;AAED,QAAGxE,KAAK+C,KAAR,EAAe;AACXxD,iBAASkF,UAAT,CAAoB,+FAApB;AACAzE,aAAK+C,KAAL,GAAa2B,SAAb;AACH;AACD,QAAG1E,KAAKuC,MAAR,EAAgB;AACZhD,iBAASkF,UAAT,CAAoB,gGAApB;AACAzE,aAAKuC,MAAL,GAAcmC,SAAd;AACH;AACD,QAAG1E,KAAKE,MAAL,KAAgBwE,SAAhB,KAA8B1E,KAAK2E,QAAL,KAAkBD,SAAlB,IAA+B1E,KAAK2E,QAAL,GAAgB,CAA7E,KAAmFN,QAAQO,QAAR,IAAoBN,MAAMM,QAAhH,EAA0H;AACtH5E,aAAKE,MAAL,GAAc,KAAd;AACH;AACD,QAAI2E,aAAa;AACbC,sBAAc,sBAASF,QAAT,EAAmB;AAC7B,gBAAIG,aAAaZ,oBAAoBS,QAApB,EAA8B5E,IAA9B,CAAjB;AACA,gBAAG,OAAOA,KAAKgF,YAAZ,IAA4B,UAA/B,EAA2C;AACvCD,6BAAaA,WAAW7D,KAAX,EAAb;AACA,oBAAI+D,eAAejF,KAAKgF,YAAL,CAAkBJ,QAAlB,EAA4BG,UAA5B,CAAnB;AACA,oBAAGE,wBAAwBzF,QAAQiE,UAAR,CAAmBC,UAA9C,EAA0D;AACtDqB,iCAAaE,YAAb;AACH;AACJ;AACD,mBAAOF,UAAP;AACH,SAXY;AAYb7E,gBAAQF,KAAKE,MAZA;AAabyE,kBAAU3E,KAAK2E;AAbF,KAAjB;AAeA,QAAG,CAAC3E,KAAKkE,WAAT,EAAsB;AAClBW,mBAAWK,SAAX,GAAuB,CAAvB;AACAL,mBAAWM,SAAX,GAAuB,EAAvB;AACH;;AAED,QAAIC,MAAM5F,QAAQiE,UAAR,CAAmB4B,MAAnB,CAA0BhB,OAA1B,EAAmC,EAACiB,OAAOpG,KAAKE,GAAL,CAAS,CAAT,EAAWY,KAAKsF,KAAL,IAAc,CAAzB,CAAR,EAAqC3C,KAAK2B,KAA1C,EAAnC,EAAqFO,UAArF,CAAV;;AAEA,QAAG,CAAC7E,KAAKsF,KAAN,KACMF,IAAIG,IAAJ,CAASC,MAAT,IAAmBJ,IAAIG,IAAJ,CAASH,IAAIG,IAAJ,CAASC,MAAT,GAAgB,CAAzB,EAA4BC,QAA5B,CAAqCnB,KAArC,CAAnB,IAAkE,CAACc,IAAIG,IAAJ,CAASH,IAAIG,IAAJ,CAASC,MAAT,GAAgB,CAAzB,EAA4BjB,SAA5B,CAAsCD,KAAtC,CAAnE,IACD,CAACc,IAAIG,IAAJ,CAASC,MAAV,IAAoBnB,QAAQoB,QAAR,CAAiBnB,KAAjB,CAFzB,CAAH,EAEsD;AAClDc,YAAIG,IAAJ,CAAS5B,IAAT,CAAcW,KAAd;AACH;AACD,QAAIoB,OAAOrB,QAAQ7C,CAAnB;AAAA,QAAsBmE,OAAOtB,QAAQ9C,CAArC;;AAEA,QAAIqE,aAAa,EAAjB;;AAEA,SAAI,IAAIlD,IAAE,CAAV,EAAaA,IAAE0C,IAAIG,IAAJ,CAASC,MAAxB,EAAgC9C,GAAhC,EAAqC;AACjC,YAAIC,MAAMyC,IAAIG,IAAJ,CAAS7C,CAAT,CAAV;AACA,YAAGC,IAAIiC,QAAJ,IAAgB7E,EAAnB,EAAuB;AACnB;AACH;AACD,YAAI8F,SAAS;AACTrE,eAAGmB,IAAInB,CADE;AAETD,eAAGoB,IAAIpB,CAFE;AAGTuE,gBAAInD,IAAInB,CAAJ,GAAQkE,IAHH;AAITK,gBAAIpD,IAAIpB,CAAJ,GAAQoE,IAJH;AAKTK,uBAAWrH,MAAMsH,YAAN,CAAmBtD,IAAInB,CAAJ,GAAQkE,IAA3B,EAAiC/C,IAAIpB,CAAJ,GAAQoE,IAAzC;AALF,SAAb;;AAQAD,eAAOG,OAAOrE,CAAd;AACAmE,eAAOE,OAAOtE,CAAd;AACAqE,mBAAWjC,IAAX,CAAgBkC,MAAhB;AACH;;AAED,QAAG7F,KAAKwE,SAAR,EAAmB;AACf,eAAO7F,MAAMuH,aAAN,CAAoBN,UAApB,CAAP;AACH;;AAED,WAAOA,UAAP;AACH;;AAED,SAASO,mBAAT,CAA6B9B,OAA7B,EAAsC+B,OAAtC,EAA+CpG,IAA/C,EAAqD;;AAEjDA,WAAOA,QAAQ,EAAf;;AAEA,QAAGvB,EAAE2E,QAAF,CAAWgD,OAAX,CAAH,EAAwB;AACpBA,kBAAU7G,SAASqE,KAAT,CAAeS,QAAQO,QAAvB,EAAiCyB,IAAjC,CAAsCD,OAAtC,EAA+C,EAACE,QAAQtG,KAAKsG,MAAd,EAA/C,CAAV;AACH,KAFD,MAGK,IAAGtG,KAAKsG,MAAR,EAAgB;AACjBF,kBAAU3H,EAAE6H,MAAF,CAASF,OAAT,EAAkBpG,KAAKsG,MAAvB,CAAV;AACH;;AAED,QAAG,CAACF,QAAQZ,MAAZ,EAAoB;AAChB,eAAO,IAAP;AACH;;AAED,QAAIe,iBAAiB9H,EAAE4H,IAAF,CAAOD,OAAP,EAAgB;AAAA,eAAO/B,QAAQE,SAAR,CAAkBiC,GAAlB,CAAP;AAAA,KAAhB,CAArB;AACA,QAAGD,cAAH,EAAmB;AACf,eAAOA,cAAP;AACH;;AAED,QAAIE,QAAQhI,EAAEiI,GAAF,CAAMN,OAAN,EAAe,aAAK;AAC5B,YAAG1D,EAAEC,GAAL,EAAU;AACND,gBAAIA,EAAEC,GAAN;AACH;AACD,eAAO,EAAC2C,OAAO,CAAR,EAAW3C,KAAKD,CAAhB,EAAP;AACH,KALW,CAAZ;;AAOA,QAAG1C,KAAK+C,KAAR,EAAe;AACXxD,iBAASkF,UAAT,CAAoB,+FAApB;AACH;AACD,QAAGzE,KAAKuC,MAAR,EAAgB;AACZhD,iBAASkF,UAAT,CAAoB,gGAApB;AACH;AACD,QAAII,aAAa;AACbC,sBAAc,sBAASF,QAAT,EAAmB;AAC7B,gBAAGrF,SAASyC,aAAT,CAAuB4C,QAAvB,CAAH,EAAqC;AACjC,oBAAIG,aAAaZ,oBAAoBS,QAApB,EAA8B5E,IAA9B,CAAjB;AACA,oBAAG,OAAOA,KAAKgF,YAAZ,IAA4B,UAA/B,EAA2C;AACvCD,iCAAaA,WAAW7D,KAAX,EAAb;AACA,wBAAI+D,eAAejF,KAAKgF,YAAL,CAAkBJ,QAAlB,EAA4BG,UAA5B,CAAnB;AACA,wBAAGE,wBAAwBzF,QAAQiE,UAAR,CAAmBC,UAA9C,EAA0D;AACtDqB,qCAAaE,YAAb;AACH;AACJ;AACD,uBAAOF,UAAP;AACH;AACJ,SAbY;AAcb7E,gBAAQF,KAAKE,MAdA;AAebyE,kBAAU;AAfG,KAAjB;AAiBA,QAAG,CAAC3E,KAAKkE,WAAT,EAAsB;AAClBW,mBAAWK,SAAX,GAAuB,CAAvB;AACAL,mBAAWM,SAAX,GAAuB,EAAvB;AACH;AACD,QAAIC,MAAM5F,QAAQiE,UAAR,CAAmB4B,MAAnB,CAA0BhB,OAA1B,EAAmCoC,KAAnC,EAA0C5B,UAA1C,CAAV;;AAEA,QAAIgB,SAAS,IAAb;AACA,QAAIc,UAAUtC,OAAd;;AAEA,QAAGe,IAAIG,IAAJ,CAASC,MAAZ,EAAoB;AAChBmB,kBAAUvB,IAAIG,IAAJ,CAASH,IAAIG,IAAJ,CAASC,MAAT,GAAgB,CAAzB,CAAV;AACH;;AAEDY,YAAQtE,OAAR,CAAgB,eAAO;AACnB,YAAG6E,QAAQlB,QAAR,CAAiBe,GAAjB,CAAH,EAA0B;AACtBX,qBAASW,GAAT;AACH;AACJ,KAJD;;AAMA,WAAOX,MAAP;AACH;;AAEDe,QAAQC,IAAR,GAAe,UAASC,YAAT,EAAuBC,QAAvB,EAAiCC,SAAjC,EAA4CC,QAA5C,EAAsD;;AAEjE5H,kBAAcyH,YAAd;AACAxH,cAAUyH,QAAV;AACAxH,eAAWyH,SAAX;AACAxH,cAAUyH,QAAV;;AAEAxH,+BAA2B,CAA3B;AACAC,uBAAmB,EAAnB;AACAC,wBAAoB,EAApB;AACAC,mBAAe,EAAf;AACAC,+BAA2B,CAA3B;;AAEA,QAAGL,QAAQ0H,IAAX,EAAiB;AACb;AACH;;AAED,QAAIC,OAAO,SAAPA,IAAO,CAACpH,EAAD,EAAQ;AACf,YAAG,CAACV,YAAYuE,KAAZ,CAAkB7D,EAAlB,CAAJ,EAA2B;AACvB,kBAAM,IAAI0C,KAAJ,CAAU,qCAAmC1C,EAA7C,CAAN;AACH;AACD,eAAOV,YAAYuE,KAAZ,CAAkB7D,EAAlB,CAAP;AACH,KALD;;AAQA;;;;;;AAMA,QAAImH,OAAO3H,SAAS6H,MAAT,CAAgB,UAASrH,EAAT,EAAa;;AAEpC,YAAIsH,aAAaF,KAAKpH,EAAL,CAAjB;;AAEA,YAAIuH,QAAJ;AAAA,YAAcC,SAASxH,EAAvB;AAAA,YAA2ByH,QAAQzH,GAAGyH,KAAH,CAAS,gBAAT,CAAnC;AACA,YAAGA,KAAH,EAAU;AACND,qBAASC,MAAM,CAAN,CAAT;AACH;AACD,YAAGnI,YAAYoI,KAAZ,IAAqBF,UAAUlI,YAAYoI,KAA9C,EAAqD;AACjDH,uBAAWjI,YAAYoI,KAAZ,CAAkBF,MAAlB,CAAX;AACH;;AAED,aAAKG,IAAL,GAAY3H,EAAZ;;AAEA,aAAK4H,IAAL,GAAY5H,MAAM,KAAN,GAAcjB,EAAE8I,eAAhB,GACR,SAASC,IAAT,CAAc9H,EAAd,IAAoBjB,EAAEgJ,UAAtB,GACA,YAAYD,IAAZ,CAAiB9H,EAAjB,IAAuBjB,EAAEiJ,aAAzB,GACAjJ,EAAEkJ,UAHN;;AAKA,aAAKC,eAAL,GAAuB,CAAvB;AACA,aAAKC,uBAAL,GAA+B,CAA/B;;AAEA,aAAKC,YAAL,GAAoBb,QAApB;;AAEA1H,qBAAaG,EAAb,IAAmB;AACfuD,oBAAQ,EADO;AAEfjD,uBAAW,EAFI;AAGf2C,wBAAY,EAHG;AAIfoF,8BAAkB,IAAIpJ,YAAYqJ,cAAhB,CAA+B,EAAC9H,kBAAkB,CAAnB,EAA/B,CAJH;AAKf+H,uBAAW,EALI;AAMfjF,+BAAmB;;AAEfkF,uBAAO,EAFQ;;AAIfnI,mBAJe,eAIXoI,KAJW,EAIJ;;AAEP,wBAAI,CAAC/J,EAAE+D,OAAF,CAAUgG,KAAV,CAAL,EAAuB;AACnB,+BAAO,CAAP;AACH;;AAED,wBAAIC,iBAAiBhK,EAAEiI,GAAF,CAAM8B,KAAN,EAAa,UAAC9F,CAAD,EAAO;AACrC,4BAAIA,KAAKA,EAAEC,GAAX,EAAgB;AACZ,mCAAOD,EAAEC,GAAT;AACH;AACD,4BAAGlE,EAAEmE,QAAF,CAAWF,CAAX,KAAiB,CAACjE,EAAEoE,WAAF,CAAcH,EAAElB,CAAhB,CAAlB,IAAwC,EAAEkB,aAAalD,QAAQsD,YAAvB,CAA3C,EAAiF;AAC7E,mCAAO,IAAItD,QAAQsD,YAAZ,CAAyBJ,EAAElB,CAA3B,EAA8BkB,EAAEnB,CAAhC,EAAmCxB,EAAnC,CAAP;AACH;AACD,+BAAO2C,CAAP;AACH,qBARoB,CAArB;;AAUA,wBAAItC,MAAM3B,EAAEiK,OAAF,CAAU,KAAKH,KAAf,EAAsB,UAACnC,OAAD,EAAa;AACzC,+BAAOqC,eAAejD,MAAf,IAAyBY,QAAQZ,MAAjC,IAA2C/G,EAAEkK,KAAF,CAAQF,cAAR,EAAwB,UAACG,CAAD;AAAA,mCAAOnK,EAAEoK,GAAF,CAAMzC,OAAN,EAAe,UAACrE,MAAD,EAAY;AACxG,oCAAG,CAACtD,EAAEmE,QAAF,CAAWgG,CAAX,CAAD,IAAkB,CAACA,EAAErE,SAAxB,EAAmC;AAC/B,0CAAM,IAAI9B,KAAJ,CAAU,sBAAoBmG,CAApB,GAAsB,8BAAhC,CAAN;AACH;AACD,uCAAOA,EAAErE,SAAF,CAAYxC,MAAZ,CAAP;AACH,6BALgF,CAAP;AAAA,yBAAxB,CAAlD;AAMH,qBAPS,CAAV;;AASA,wBAAI3B,QAAQsE,SAAZ,EAAuB;AACnBtE,8BAAMX,0BAAN;AACA,6BAAK8I,KAAL,CAAWnI,GAAX,IAAkB3B,EAAEyC,KAAF,CAAQsH,KAAR,CAAlB;AACH,qBAHD,MAIK;AACDpI,8BAAM0I,SAAS1I,GAAT,CAAN;AACH;;AAED,2BAAOA,GAAP;AACH;AAtCc,aANJ;AA8Cf2I,+BAAmB;AACfC,uBAAOzJ,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmJ,MADZ;AAEfC,wBAAQ5J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBoJ,MAFb;AAGfC,0BAAU7J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBoJ,MAHf;AAIfE,wBAAQ9J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBuJ,OAJb;AAKfC,yBAAShK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoByJ,QALd;AAMfC,2BAAWlK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoB2J,UANhB;AAOfC,sBAAMpK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoB6J,KAPX;AAQfC,kCAAkBtK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoB+J,iBARvB;AASfC,sBAAMxK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBiK;AATX,aA9CJ;AAyDfC,sCAA0B;AACtBjB,uBAAOzJ,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BhB,MADb;AAEtBC,wBAAQ5J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4Bf,MAFd;AAGtBC,0BAAU7J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4Bf,MAHhB;AAItBE,wBAAQ9J,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BZ,OAJd;AAKtBC,yBAAShK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BV,QALf;AAMtBC,2BAAWlK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BR,UANjB;AAOtBC,sBAAMpK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BN,KAPZ;AAQtBC,kCAAkBtK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BJ,iBARxB;AAStBC,sBAAMxK,SAAS0J,MAAT,CAAgBlJ,EAAhB,EAAoBmK,OAApB,CAA4BF;AATZ;AAzDX,SAAnB;;AAsEA,aAAKG,MAAL,GAAc,IAAI3K,QAAQ4K,UAAZ,CAAuBrK,EAAvB,CAAd;AACH,KA/FU,CAAX;;AAiGAmH,SAAKhB,aAAL,GAAqB3G,SAAS6H,MAAT,CAAgB,UAAS7B,IAAT,EAAe;AAChD,eAAO5G,MAAMuH,aAAN,CAAoBX,IAApB,CAAP;AACH,KAFoB,CAArB;;AAIA2B,SAAKmD,eAAL,GAAuB9K,SAAS6H,MAAT,CAAgB,UAASkD,GAAT,EAAc;AACjD,eAAO3L,MAAM0L,eAAN,CAAsBC,GAAtB,CAAP;AACH,KAFsB,CAAvB;;AAIApD,SAAKqD,SAAL,CAAeC,QAAf,GAA0BjL,SAAS6H,MAAT,CAAgB,YAAW;AACjD,0BAAgB,KAAKM,IAArB;AACH,KAFyB,CAA1B;;AAIAR,SAAKqD,SAAL,CAAeE,MAAf,GAAwBlL,SAAS6H,MAAT,CAAgB,YAAW;AAC/C,YAAIvB,SAAS,EAAb;AACA,aAAI,IAAInD,CAAR,IAAa,IAAb,EAAmB;AACf,gBAAGA,EAAE,CAAF,KAAQ,GAAR,IAAejE,EAAEwD,QAAF,CAAW,CAAC,QAAD,EAAU,UAAV,EAAqB,YAArB,EAAkC,SAAlC,EAA4C,UAA5C,CAAX,EAAmES,CAAnE,CAAlB,EAAyF;AACrF;AACH;AACDmD,mBAAOnD,CAAP,IAAY,KAAKA,CAAL,CAAZ;AACH;AACD,eAAOmD,MAAP;AACH,KATuB,CAAxB;;AAWA6E,WAAOC,cAAP,CAAsBzD,KAAKqD,SAA3B,EAAsC,QAAtC,EAAgD;AAC5CtG,aAAK,eAAW;AACZ,gBAAGxF,EAAEoE,WAAF,CAAcrD,QAAQoL,MAAR,CAAehH,KAA7B,KAAuCpE,QAAQoL,MAAR,CAAehH,KAAf,KAAyB,WAAnE,EAAgF;AAC5EpE,wBAAQoL,MAAR,CAAehH,KAAf,GAAuB,EAAvB;AACH;AACD,gBAAG,CAACnF,EAAEmE,QAAF,CAAWpD,QAAQoL,MAAR,CAAehH,KAA1B,CAAJ,EAAsC;AAClC,uBAAOc,SAAP;AACH;AACD,mBAAOlF,QAAQoL,MAAR,CAAehH,KAAf,CAAqB,KAAK8D,IAA1B,IAAkClI,QAAQoL,MAAR,CAAehH,KAAf,CAAqB,KAAK8D,IAA1B,KAAmC,EAA5E;AACH,SAT2C;;AAW5C1D,aAAK,aAAS6G,KAAT,EAAgB;AACjB,gBAAGpM,EAAEoE,WAAF,CAAcrD,QAAQoL,MAAR,CAAehH,KAA7B,KAAuCpE,QAAQoL,MAAR,CAAehH,KAAf,KAAyB,WAAnE,EAAgF;AAC5EpE,wBAAQoL,MAAR,CAAehH,KAAf,GAAuB,EAAvB;AACH;AACD,gBAAG,CAACnF,EAAEmE,QAAF,CAAWpD,QAAQoL,MAAR,CAAehH,KAA1B,CAAJ,EAAsC;AAClC,sBAAM,IAAInB,KAAJ,CAAU,2BAAV,CAAN;AACH;AACDjD,oBAAQoL,MAAR,CAAehH,KAAf,CAAqB,KAAK8D,IAA1B,IAAkCmD,KAAlC;AACH;AAnB2C,KAAhD;;AAsBA3D,SAAKqD,SAAL,CAAelE,IAAf,GAAsB9G,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAelC,IAAf,EAAqB;AAAA;;AACvD,YAAI6F,SAAS,EAAb;AACA7F,eAAOA,QAAQ,EAAf;AACA,YAAGkC,SAASpD,EAAEgM,mBAAd,EAAmC;AAC/BvL,qBAASkF,UAAT,CAAoB,4HAApB;AACAvC,mBAAOpD,EAAEiM,sBAAT;AACH;AACD,YAAGxL,SAASyL,SAAT,CAAmB9I,IAAnB,KAA4B3C,SAASyL,SAAT,CAAmB9I,IAAnB,EAAyB,KAAKwF,IAA9B,CAA/B,EAAoE;AAChE7B,qBAAStG,SAASyL,SAAT,CAAmB9I,IAAnB,EAAyB,KAAKwF,IAA9B,CAAT;AACH,SAFD,MAGK;AACD,oBAAQxF,IAAR;AACI,qBAAKpD,EAAEmM,SAAP;AACI1L,6BAASyL,SAAT,CAAmB9I,IAAnB,IAA2B3C,SAASyL,SAAT,CAAmB9I,IAAnB,KAA4B,EAAvD;AACA3C,6BAASyL,SAAT,CAAmB9I,IAAnB,EAAyB,KAAKwF,IAA9B,IAAsC,KAAKrB,IAAL,CAAUvH,EAAEoM,aAAZ,EAA2BlL,IAA3B,EACrCmL,MADqC,CAC9B,KAAK9E,IAAL,CAAUvH,EAAEsM,gBAAZ,EAA8BpL,IAA9B,CAD8B,EAErCmL,MAFqC,CAE9B,KAAK9E,IAAL,CAAUvH,EAAEuM,eAAZ,EAA6BrL,IAA7B,CAF8B,EAGrCmL,MAHqC,CAG9B,KAAK9E,IAAL,CAAUvH,EAAEwM,cAAZ,EAA4BtL,IAA5B,CAH8B,CAAtC;AAIA,2BAAOvB,EAAEyC,KAAF,CAAQ3B,SAASyL,SAAT,CAAmB9I,IAAnB,EAAyB,KAAKwF,IAA9B,CAAR,CAAP;AACJ,qBAAK5I,EAAEoM,aAAP;AACA,qBAAKpM,EAAEuM,eAAP;AACA,qBAAKvM,EAAEsM,gBAAP;AACA,qBAAKtM,EAAEwM,cAAP;;AAEI/L,6BAASyL,SAAT,CAAmB9I,IAAnB,IAA2B3C,SAASyL,SAAT,CAAmB9I,IAAnB,KAA4B,EAAvD;;AAEA,wBAAIqJ,QAAQ,EAAZ;AACA,yBAAK,IAAI7I,IAAI,CAAb,EAAgBA,IAAI,EAApB,EAAwBA,GAAxB,EAA6B;AACzB,4BAAIlB,IAAE,CAAN;AAAA,4BAAQD,IAAE,CAAV;AACA,4BAAGW,QAAQpD,EAAEwM,cAAV,IAA4BpJ,QAAQpD,EAAEuM,eAAzC,EAA0D;AACtD9J,gCAAImB,CAAJ;AACH,yBAFD,MAGM;AACFlB,gCAAIkB,CAAJ;AACH;AACD,4BAAGR,QAAQpD,EAAEuM,eAAb,EAA8B;AAC1B7J,gCAAI,EAAJ;AACH;AACD,4BAAGU,QAAQpD,EAAEsM,gBAAb,EAA+B;AAC3B7J,gCAAI,EAAJ;AACH;AACDgK,8BAAM5H,IAAN,CAAW,EAAEtE,YAAYqC,iBAAZ,CAA8B,KAAKgG,IAAnC,EAAyCnG,IAAE,EAAF,GAAKC,CAA9C,IAAmD1C,EAAE6C,iBAAvD,CAAX;AACH;;AAEDkE,6BAASpH,EAAE+M,MAAF,CAASD,KAAT,EAAgB,UAACE,KAAD,EAAQ/I,CAAR,EAAWtC,GAAX,EAAmB;AACxC,4BAAIsC,CAAJ,EAAO;AACH,gCAAIR,QAAQpD,EAAEoM,aAAd,EAA6B;AACzBO,sCAAM9H,IAAN,CAAW,MAAK+H,aAAL,CAAmBtL,GAAnB,EAAwB,CAAxB,CAAX;AACH;AACD,gCAAI8B,QAAQpD,EAAEsM,gBAAd,EAAgC;AAC5BK,sCAAM9H,IAAN,CAAW,MAAK+H,aAAL,CAAmBtL,GAAnB,EAAwB,EAAxB,CAAX;AACH;AACD,gCAAI8B,QAAQpD,EAAEwM,cAAd,EAA8B;AAC1BG,sCAAM9H,IAAN,CAAW,MAAK+H,aAAL,CAAmB,CAAnB,EAAsBtL,GAAtB,CAAX;AACH;AACD,gCAAI8B,QAAQpD,EAAEuM,eAAd,EAA+B;AAC3BI,sCAAM9H,IAAN,CAAW,MAAK+H,aAAL,CAAmB,EAAnB,EAAuBtL,GAAvB,CAAX;AACH;AACJ;AACD,+BAAOqL,KAAP;AACH,qBAhBQ,EAgBN,EAhBM,CAAT;;AAkBAlM,6BAASyL,SAAT,CAAmB9I,IAAnB,EAAyB,KAAKwF,IAA9B,IAAsC7B,MAAtC;;AAEA;AArDR;AAuDH;;AAED,YAAG7F,KAAKsG,MAAR,EAAgB;AACZT,qBAASpH,EAAE6H,MAAF,CAAST,MAAT,EAAiB7F,KAAKsG,MAAtB,CAAT;AACH,SAFD,MAGK;AACDT,qBAASpH,EAAEyC,KAAF,CAAQ2E,MAAR,CAAT;AACH;;AAED,eAAOA,MAAP;AAEH,KA7EqB,CAAtB;;AA+EA,aAAS8F,oBAAT,CAA+B5L,EAA/B,EAAmC6L,QAAnC,EAA6CpK,CAA7C,EAA+CD,CAA/C,EAAkDsK,QAAlD,EAA4DC,UAA5D,EAAwE;;AAEpE,YAAIC,IAAJ;;AAEA,YAAGH,YAAY,SAAf,EAA0B;AACtB,gBAAI/F,SAAS,OAAb;AACA,gBAAIpE,cAAcpC,YAAYqC,iBAAZ,CAA8B3B,EAA9B,EAAkCwB,IAAE,EAAF,GAAKC,CAAvC,CAAlB;AACA,gBAAGC,cAAc3C,EAAE8C,kBAAnB,EAAuC;AACnCiE,yBAAS,OAAT;AACH;AACD,gBAAGpE,cAAc3C,EAAE6C,iBAAnB,EAAsC;AAClCkE,yBAAS,MAAT;AACH;AACD,gBAAGgG,QAAH,EAAa;AACTE,uBAAO,EAAC7J,MAAM,SAAP,EAAkB8J,SAASnG,MAA3B,EAAP;AACA,oBAAGiG,UAAH,EAAe;AACXC,yBAAKvK,CAAL,GAASA,CAAT;AACAuK,yBAAKxK,CAAL,GAASA,CAAT;AACH;AACDsK,yBAASlI,IAAT,CAAcoI,IAAd;AACA;AACH;AACD,mBAAO,CAAClG,MAAD,CAAP;AACH;;AAED,YAAGrE,IAAI,CAAJ,IAASD,IAAI,CAAb,IAAkBC,IAAI,EAAtB,IAA4BD,IAAI,EAAnC,EAAuC;AACnC,kBAAM,IAAIkB,KAAJ,CAAU,+BAAV,CAAN;AACH;;AAED,YAAIwJ,aAAarM,aAAaG,EAAb,EAAiBkK,wBAAjB,CAA0C2B,QAA1C,EAAoDrK,CAApD,EAAuDC,CAAvD,CAAjB;AACA,YAAGyK,UAAH,EAAe;AACX,gBAAGJ,QAAH,EAAa;AACTI,2BAAWnK,OAAX,CAAmB,UAACY,CAAD,EAAO;AACtBqJ,2BAAO,EAAC7J,MAAM0J,QAAP,EAAP;AACAG,yBAAKH,QAAL,IAAiBlJ,CAAjB;AACA,wBAAGoJ,UAAH,EAAe;AACXC,6BAAKvK,CAAL,GAASA,CAAT;AACAuK,6BAAKxK,CAAL,GAASA,CAAT;AACH;AACDsK,6BAASlI,IAAT,CAAcoI,IAAd;AACH,iBARD;AASA;AACH;AACD,mBAAOtN,EAAEyC,KAAF,CAAQ+K,UAAR,CAAP;AACH;AACD,eAAO,EAAP;AACH;;AAED,aAASC,sBAAT,CAAgCnM,EAAhC,EAAoCmC,IAApC,EAA0CiK,GAA1C,EAA+CC,IAA/C,EAAqDC,MAArD,EAA6DC,KAA7D,EAAoEC,QAApE,EAA8EC,OAA9E,EAAuF3G,MAAvF,EAA+F;AAC3F,YAAI4G,eAAe7M,aAAaG,EAAb,EAAiBgJ,iBAAjB,CAAmC7G,IAAnC,CAAnB;AAAA,YACAwK,OAAOD,gBAAgB/B,OAAOgC,IAAP,CAAYD,YAAZ,CADvB;;AAGA,YAAGvK,QAAQ,SAAR,IAAqBwK,KAAKlH,MAAL,GAAc,CAAC6G,SAAOF,GAAP,GAAW,CAAZ,KAAgBG,QAAMF,IAAN,GAAW,CAA3B,CAAtC,EAAqE;;AAEjE;;AAEA,gBAAIO,cAAc,SAAdA,WAAc,CAACjK,CAAD,EAAO;AACrB,uBAAO,CAAC,CAACA,EAAEC,GAAH,IAAUD,EAAEkC,QAAF,IAAc7E,EAAxB,IAA8B2C,EAAEC,GAAF,IAASD,EAAEC,GAAF,CAAMiC,QAAN,IAAkB7E,EAA1D,KACP2C,EAAEC,GADK,IACED,EAAEC,GAAF,CAAMpB,CAAN,IAAW4K,GADb,IACoBzJ,EAAEC,GAAF,CAAMpB,CAAN,IAAW8K,MAD/B,IACyC3J,EAAEC,GAAF,CAAMnB,CAAN,IAAW4K,IADpD,IAC4D1J,EAAEC,GAAF,CAAMnB,CAAN,IAAW8K,KADvE,IAEP,CAAC5J,EAAEC,GAAH,IAAUD,EAAEnB,CAAF,IAAO4K,GAAjB,IAAwBzJ,EAAEnB,CAAF,IAAO8K,MAA/B,IAAyC3J,EAAElB,CAAF,IAAO4K,IAAhD,IAAwD1J,EAAElB,CAAF,IAAO8K,KAF/D;AAGH,aAJD;AAKA,gBAAIP,IAAJ;AACAW,iBAAK5K,OAAL,CAAa,UAAC1B,GAAD,EAAS;AAClB,oBAAIoG,MAAMiG,aAAarM,GAAb,CAAV;AACA,oBAAGuM,YAAYnG,GAAZ,CAAH,EAAqB;AACjB,wBAAG+F,QAAH,EAAa;AACTR,+BAAO,EAAC7J,MAAMA,IAAP,EAAP;AACA6J,6BAAK7J,IAAL,IAAasE,GAAb;AACA,4BAAGgG,OAAH,EAAY;AACR3G,mCAAOlC,IAAP,mBAAanC,GAAGgF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAAjC,EAAoCD,GAAGiF,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxD,EAA2DW,UAA3D,IAAkEA,IAAlE,EAAyEsE,GAAzE;AACH,yBAFD,MAGK;AACDX,mCAAOW,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxB,EAA2BiF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAA5C,EAA+CmC,IAA/C,CAAoDoI,IAApD;AACH;AACJ,qBATD,MAUK;AACD,4BAAGS,OAAH,EAAY;AACR3G,mCAAOlC,IAAP,mBAAanC,GAAGgF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAAjC,EAAoCD,GAAGiF,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxD,IAA4DW,IAA5D,EAAmEsE,GAAnE;AACH,yBAFD,MAGK;AACDX,mCAAOW,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxB,EAA2BiF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAA5C,IAAiDqE,OAAOW,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxB,EAA2BiF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAA5C,KAAkD,EAAnG;AACAqE,mCAAOW,IAAIjF,CAAJ,IAASiF,IAAI7D,GAAJ,CAAQpB,CAAxB,EAA2BiF,IAAIhF,CAAJ,IAASgF,IAAI7D,GAAJ,CAAQnB,CAA5C,EAA+CmC,IAA/C,CAAoD6C,GAApD;AACH;AACJ;AACJ;AACJ,aAvBD;AAwBH,SAlCD,MAmCK;;AAED;;AAEA,iBAAK,IAAIjF,IAAI4K,GAAb,EAAkB5K,KAAK8K,MAAvB,EAA+B9K,GAA/B,EAAoC;AAChC,qBAAK,IAAIC,IAAI4K,IAAb,EAAmB5K,KAAK8K,KAAxB,EAA+B9K,GAA/B,EAAoC;AAChC,wBAAGgL,OAAH,EAAY;AACRb,6CAAqB5L,EAArB,EAAyBmC,IAAzB,EAA+BV,CAA/B,EAAkCD,CAAlC,EAAqCsE,MAArC,EAA6C,IAA7C;AACH,qBAFD,MAGK;AACD,4BAAIA,OAAOtE,CAAP,EAAUC,CAAV,CAAJ,EAAkB;AACdmK,iDAAqB5L,EAArB,EAAyBmC,IAAzB,EAA+BV,CAA/B,EAAkCD,CAAlC,EAAqCsE,OAAOtE,CAAP,EAAUC,CAAV,CAArC;AACH,yBAFD,MAGK;AACDqE,mCAAOtE,CAAP,EAAUC,CAAV,IAAemK,qBAAqB5L,EAArB,EAAyBmC,IAAzB,EAA+BV,CAA/B,EAAkCD,CAAlC,EAAqCmD,SAArC,CAAf;AACH;AACJ;AACJ;AACJ;AACJ;AACJ;;AAEDwC,SAAKqD,SAAL,CAAeqC,MAAf,GAAwBrN,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B;AAAA,oCACtDnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADsD;AAAA;AAAA,YAC7DgC,CAD6D;AAAA,YAC3DD,CAD2D;AAAA,YAE9DsE,MAF8D,GAErD,EAFqD;;AAIlE8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEkO,WAAlC,EAA+CxL,CAA/C,EAAiDD,CAAjD,EAAoDsE,MAApD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEmO,WAAlC,EAA+CzL,CAA/C,EAAiDD,CAAjD,EAAoDsE,MAApD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEoO,cAAlC,EAAkD1L,CAAlD,EAAoDD,CAApD,EAAuDsE,MAAvD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEqO,YAAlC,EAAgD3L,CAAhD,EAAkDD,CAAlD,EAAqDsE,MAArD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEsO,aAAlC,EAAiD5L,CAAjD,EAAmDD,CAAnD,EAAsDsE,MAAtD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEuO,eAAlC,EAAmD7L,CAAnD,EAAqDD,CAArD,EAAwDsE,MAAxD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEwO,UAAlC,EAA8C9L,CAA9C,EAAgDD,CAAhD,EAAmDsE,MAAnD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAEyO,uBAAlC,EAA2D/L,CAA3D,EAA6DD,CAA7D,EAAgEsE,MAAhE;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAE0O,YAAlC,EAAgDhM,CAAhD,EAAkDD,CAAlD,EAAqDsE,MAArD;AACA8F,6BAAqB,KAAKjE,IAA1B,EAAgC5I,EAAE2O,UAAlC,EAA8CjM,CAA9C,EAAgDD,CAAhD,EAAmDsE,MAAnD;;AAEA,eAAOA,MAAP;AACH,KAhBuB,CAAxB;;AAkBAqB,SAAKqD,SAAL,CAAemD,SAAf,GAA2BnO,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAe2K,QAAf,EAAyBC,SAAzB,EAAoC;AAAA,qCAC/DnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CAD+D;AAAA;AAAA,YACtEgC,CADsE;AAAA,YACpED,CADoE;;AAG3E,YAAGW,QAAQ,SAAR,IAAqB,EAAEA,QAAQtC,aAAa,KAAK8H,IAAlB,EAAwBuC,wBAAlC,CAAxB,EAAqF;AACjF,mBAAOnL,EAAE6O,gBAAT;AACH;;AAED,eAAOhC,qBAAqB,KAAKjE,IAA1B,EAAgCxF,IAAhC,EAAsCV,CAAtC,EAAwCD,CAAxC,CAAP;AACH,KAR0B,CAA3B;;AAUA2F,SAAKqD,SAAL,CAAeqD,UAAf,GAA4BrO,SAAS6H,MAAT,CAAgB,UAAS+E,GAAT,EAAcC,IAAd,EAAoBC,MAApB,EAA4BC,KAA5B,EAAmCE,OAAnC,EAA4C;;AAEpF,YAAI3G,SAAS2G,UAAU,EAAV,GAAe,EAA5B;;AAEA,YAAG,CAACA,OAAJ,EAAa;AACT,iBAAK,IAAIjL,IAAI4K,GAAb,EAAkB5K,KAAK8K,MAAvB,EAA+B9K,GAA/B,EAAoC;AAChCsE,uBAAOtE,CAAP,IAAY,EAAZ;AACA,qBAAK,IAAIC,IAAI4K,IAAb,EAAmB5K,KAAK8K,KAAxB,EAA+B9K,GAA/B,EAAoC;AAChCqE,2BAAOtE,CAAP,EAAUC,CAAV,IAAe,EAAf;AACH;AACJ;AACJ;;AAED0K,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEkO,WAApC,EAAiDb,GAAjD,EAAsDC,IAAtD,EAA4DC,MAA5D,EAAoEC,KAApE,EAA2E,IAA3E,EAAiFE,OAAjF,EAA0F3G,MAA1F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEmO,WAApC,EAAiDd,GAAjD,EAAsDC,IAAtD,EAA4DC,MAA5D,EAAoEC,KAApE,EAA2E,IAA3E,EAAiFE,OAAjF,EAA0F3G,MAA1F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEoO,cAApC,EAAoDf,GAApD,EAAyDC,IAAzD,EAA+DC,MAA/D,EAAuEC,KAAvE,EAA8E,IAA9E,EAAoFE,OAApF,EAA6F3G,MAA7F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEqO,YAApC,EAAkDhB,GAAlD,EAAuDC,IAAvD,EAA6DC,MAA7D,EAAqEC,KAArE,EAA4E,IAA5E,EAAkFE,OAAlF,EAA2F3G,MAA3F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEsO,aAApC,EAAmDjB,GAAnD,EAAwDC,IAAxD,EAA8DC,MAA9D,EAAsEC,KAAtE,EAA6E,IAA7E,EAAmFE,OAAnF,EAA4F3G,MAA5F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEuO,eAApC,EAAqDlB,GAArD,EAA0DC,IAA1D,EAAgEC,MAAhE,EAAwEC,KAAxE,EAA+E,IAA/E,EAAqFE,OAArF,EAA8F3G,MAA9F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEwO,UAApC,EAAgDnB,GAAhD,EAAqDC,IAArD,EAA2DC,MAA3D,EAAmEC,KAAnE,EAA0E,IAA1E,EAAgFE,OAAhF,EAAyF3G,MAAzF;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAEyO,uBAApC,EAA6DpB,GAA7D,EAAkEC,IAAlE,EAAwEC,MAAxE,EAAgFC,KAAhF,EAAuF,IAAvF,EAA6FE,OAA7F,EAAsG3G,MAAtG;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAE0O,YAApC,EAAkDrB,GAAlD,EAAuDC,IAAvD,EAA6DC,MAA7D,EAAqEC,KAArE,EAA4E,IAA5E,EAAkFE,OAAlF,EAA2F3G,MAA3F;AACAqG,+BAAuB,KAAKxE,IAA5B,EAAkC5I,EAAE2O,UAApC,EAAgDtB,GAAhD,EAAqDC,IAArD,EAA2DC,MAA3D,EAAmEC,KAAnE,EAA0E,IAA1E,EAAgFE,OAAhF,EAAyF3G,MAAzF;;AAEA,eAAOA,MAAP;AACH,KAzB2B,CAA5B;;AA2BAqB,SAAKqD,SAAL,CAAesD,aAAf,GAA+BtO,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAeiK,GAAf,EAAoBC,IAApB,EAA0BC,MAA1B,EAAkCC,KAAlC,EAAyCE,OAAzC,EAAkD;;AAE7F,YAAI3G,SAAS2G,UAAU,EAAV,GAAe,EAA5B;;AAEA,YAAG,CAACA,OAAJ,EAAa;AACT,iBAAK,IAAIjL,IAAI4K,GAAb,EAAkB5K,KAAK8K,MAAvB,EAA+B9K,GAA/B,EAAoC;AAChCsE,uBAAOtE,CAAP,IAAY,EAAZ;AACH;AACJ;;AAED2K,+BAAuB,KAAKxE,IAA5B,EAAkCxF,IAAlC,EAAwCiK,GAAxC,EAA6CC,IAA7C,EAAmDC,MAAnD,EAA2DC,KAA3D,EAAkE,KAAlE,EAAyEE,OAAzE,EAAkF3G,MAAlF;;AAEA,eAAOA,MAAP;AACH,KAb8B,CAA/B;;AAgBAqB,SAAKqD,SAAL,CAAeuD,QAAf,GAA0BvO,SAAS6H,MAAT,CAAgB,UAAS/C,OAAT,EAAkBC,KAAlB,EAAyBtE,IAAzB,EAA+B;;AAErE,YAAGqE,QAAQO,QAAR,IAAoB,KAAK8C,IAA5B,EAAkC;AAC9B,mBAAO1H,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;;AAED,YAAGjF,SAASwO,iBAAZ,EAA+B;AAC3B,mBAAO3J,WAAW,KAAKsD,IAAhB,EAAsBrD,OAAtB,EAA+BC,KAA/B,EAAsCtE,IAAtC,CAAP;AACH;;AAED,YAAIgO,QAAQ3J,QAAQ7C,CAApB;AAAA,YAAuByM,QAAQ5J,QAAQ9C,CAAvC;AAAA,YACIgE,IADJ;AAAA,YAEI2I,iBAAiB,EAFrB;;AAIAlO,eAAOvB,EAAEyC,KAAF,CAAQlB,QAAQ,EAAhB,CAAP;;AAEA,YAAGA,KAAKsB,YAAR,EAAsB;AAClB4M,8BAAkB,eAAlB;AACH;AACD,YAAGlO,KAAKoB,4BAAR,EAAsC;AAClC8M,8BAAkB,+BAAlB;AACH;AACD,YAAGlO,KAAK+C,KAAR,EAAe;AACXmL,8BAAkB,WAAStO,aAAa,KAAK8H,IAAlB,EAAwBrE,iBAAxB,CAA0CjD,GAA1C,CAA8CJ,KAAK+C,KAAnD,CAA3B;AACH;AACD,YAAG/C,KAAKuC,MAAR,EAAgB;AACZ2L,8BAAkB,YAAUtO,aAAa,KAAK8H,IAAlB,EAAwBrE,iBAAxB,CAA0CjD,GAA1C,CAA8CJ,KAAKuC,MAAnD,CAA5B;AACH;;AAED,YAAG9D,EAAE2E,QAAF,CAAWkB,KAAX,CAAH,EAAsB;AAClB,gBAAG,CAAC1E,aAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmCsB,KAAnC,CAAJ,EAA+C;AAC3C,uBAAOtE,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;;AAED,gBAAI2J,OAAOjL,mBAAmB,KAAKwE,IAAxB,EAA8B1H,IAA9B,EAAoCsE,KAApC,CAAX;;AAEAiB,mBAAO3F,aAAa,KAAK8H,IAAlB,EAAwBU,gBAAxB,CAAyC0F,QAAzC,CAAkDE,KAAlD,EAAyDC,KAAzD,EAAgE,CAAC,GAAjE,EAAsE,CAAC,GAAvE,EAA4EE,IAA5E,CAAP;AACH,SARD,MASK;;AAED,gBAAG7J,MAAMM,QAAN,IAAkB,KAAK8C,IAA1B,EAAgC;AAC5B,uBAAO1H,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;;AAED,gBAAI4J,MAAM9J,MAAM9C,CAAhB;AAAA,gBAAmB6M,MAAM/J,MAAM/C,CAA/B;AAAA,gBACI+M,WAAcN,KAAd,SAAuBC,KAAvB,SAAgCG,GAAhC,SAAuCC,GAAvC,GAA6CH,cADjD;;AAGA,gBAAGtO,aAAa,KAAK8H,IAAlB,EAAwBY,SAAxB,CAAkCgG,QAAlC,CAAH,EAAgD;AAC5C,uBAAOtO,KAAKwE,SAAL,GAAiB7F,MAAMuH,aAAN,CAAoBtG,aAAa,KAAK8H,IAAlB,EAAwBY,SAAxB,CAAkCgG,QAAlC,CAApB,CAAjB,GAAoF7P,EAAE8P,SAAF,CAAY3O,aAAa,KAAK8H,IAAlB,EAAwBY,SAAxB,CAAkCgG,QAAlC,CAAZ,CAA3F;AACH;;AAED,gBAAIN,SAASI,GAAT,IAAgBH,SAASI,GAA7B,EAAkC;AAC9B,uBAAOrO,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;AACD,gBAAIwJ,QAAQ,CAAR,IAAaC,QAAQ,CAArB,IAA0BG,MAAM,CAAhC,IAAqCC,MAAM,CAA3C,IACAL,SAAS,EADT,IACeC,SAAS,EADxB,IAC8BG,OAAO,EADrC,IAC2CC,OAAO,EADtD,EAC0D;AACtD,uBAAOrO,KAAKwE,SAAL,GAAiB,EAAjB,GAAsB,EAA7B;AACH;;AAED,gBAAIvF,IAAI+O,QAAQI,GAAZ,IAAmB,CAAnB,IAAwBnP,IAAIgP,QAAQI,GAAZ,IAAmB,CAA/C,EAAkD;AAC9C,oBAAIxI,SAAS,CAAC;AACVrE,uBAAG4M,GADO;AAEV7M,uBAAG8M,GAFO;AAGVvI,wBAAIsI,MAAMJ,KAHA;AAIVjI,wBAAIsI,MAAMJ,KAJA;AAKVjI,+BAAWrH,MAAMsH,YAAN,CAAmBmI,MAAMJ,KAAzB,EAAgCK,MAAMJ,KAAtC;AALD,iBAAD,CAAb;AAOA,uBAAOjO,KAAKwE,SAAL,GAAiB7F,MAAMuH,aAAN,CAAoBL,MAApB,CAAjB,GAA+CA,MAAtD;AACH;;AAED,gBAAIsI,OAAOjL,mBAAmB,KAAKwE,IAAxB,EAA8B1H,IAA9B,CAAX;AAAA,gBACIwO,SAAS1O,cAAc,KAAK4H,IAAnB,EAAyB1H,IAAzB,CADb;;AAGAmO,iBAAKM,aAAL,CAAmBL,GAAnB,EAAwBC,GAAxB,EAA6B,IAA7B;AACA9I,mBAAOiJ,OAAOV,QAAP,CAAgBE,KAAhB,EAAuBC,KAAvB,EAA8BG,GAA9B,EAAmCC,GAAnC,EAAwCF,IAAxC,CAAP;AACH;;AAED5I,aAAKmJ,MAAL,CAAY,CAAZ,EAAc,CAAd;;AAEA,YAAIhJ,OAAOsI,KAAX;AAAA,YAAkBrI,OAAOsI,KAAzB;;AAEA,YAAIrI,aAAanH,EAAEiI,GAAF,CAAMnB,IAAN,EAAY,UAACoJ,IAAD,EAAU;AACnC,gBAAI9I,SAAS;AACTrE,mBAAGmN,KAAK,CAAL,CADM;AAETpN,mBAAGoN,KAAK,CAAL,CAFM;AAGT7I,oBAAI6I,KAAK,CAAL,IAAUjJ,IAHL;AAITK,oBAAI4I,KAAK,CAAL,IAAUhJ,IAJL;AAKTK,2BAAWrH,MAAMsH,YAAN,CAAmB0I,KAAK,CAAL,IAAUjJ,IAA7B,EAAmCiJ,KAAK,CAAL,IAAUhJ,IAA7C;AALF,aAAb;;AAQAD,mBAAOG,OAAOrE,CAAd;AACAmE,mBAAOE,OAAOtE,CAAd;AACA,mBAAOsE,MAAP;AACH,SAZgB,CAAjB;;AAcA,YAAGD,WAAWJ,MAAX,GAAoB,CAAvB,EAA0B;AACtB,gBAAIoJ,WAAWhJ,WAAWA,WAAWJ,MAAX,GAAkB,CAA7B,CAAf;AAAA,gBACI8I,WAAcN,KAAd,SAAuBC,KAAvB,SAAgCW,SAASpN,CAAzC,SAA8CoN,SAASrN,CAAvD,GAA2D2M,cAD/D;AAEAtO,yBAAa,KAAK8H,IAAlB,EAAwBY,SAAxB,CAAkCgG,QAAlC,IAA8C7P,EAAE8P,SAAF,CAAY3I,UAAZ,CAA9C;AACH;;AAED,YAAG5F,KAAKwE,SAAR,EAAmB;AACf,mBAAO7F,MAAMuH,aAAN,CAAoBN,UAApB,CAAP;AACH;;AAED,eAAOA,UAAP;AACH,KA1GyB,CAA1B;;AA4GAsB,SAAKqD,SAAL,CAAemB,aAAf,GAA+BnM,SAAS6H,MAAT,CAAgB,UAAS5F,CAAT,EAAWD,CAAX,EAAc;AACzD,YAAGC,IAAI,CAAJ,IAASA,IAAI,EAAb,IAAmBD,IAAI,CAAvB,IAA4BA,IAAI,EAAnC,EAAuC;AACnC,mBAAO,IAAP;AACH;AACD,eAAO,IAAI/B,QAAQsD,YAAZ,CAAyBtB,CAAzB,EAA2BD,CAA3B,EAA6B,KAAKmG,IAAlC,CAAP;AACH,KAL8B,CAA/B;;AAOAR,SAAKqD,SAAL,CAAesE,UAAf,GAA4BtP,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8BpF,IAA9B,EAAoCoH,KAApC,EAA2CC,cAA3C,EAA2D;AAAA,qCACvFpQ,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADuF;AAAA;AAAA,YAC9FgC,CAD8F;AAAA,YAC5FD,CAD4F;;AAGnG,YAAG9C,EAAEoE,WAAF,CAAcrB,CAAd,KAAoB/C,EAAEoE,WAAF,CAActB,CAAd,CAApB,IAAwCC,IAAI,CAA5C,IAAiDA,IAAI,EAArD,IAA2DD,IAAI,CAA/D,IAAoEA,IAAI,EAA3E,EAA+E;AAC3E,mBAAOzC,EAAE6O,gBAAT;AACH;AACD,YAAGlP,EAAEuQ,IAAF,CAAOxP,QAAQyP,IAAR,CAAarF,KAApB,KAA8B9K,EAAEoQ,WAAnC,EAAgD;AAC5C,mBAAOpQ,EAAEqQ,QAAT;AACH;AACD,YAAG1Q,EAAEmE,QAAF,CAAWiK,QAAX,CAAH,EAAyB;AACrBkC,6BAAiBD,KAAjB;AACAA,oBAAQpH,IAAR;AACAA,mBAAOoF,SAAP;AACH;AACD,YAAG,CAACgC,KAAJ,EAAW;AACPA,oBAAQhQ,EAAEsQ,WAAV;AACH;AACD,YAAG,CAACL,cAAJ,EAAoB;AAChBA,6BAAiBD,KAAjB;AACH;AACD,YAAG,CAACrQ,EAAEwD,QAAF,CAAWnD,EAAEuQ,UAAb,EAAyBP,KAAzB,CAAJ,EAAqC;AACjC,mBAAOhQ,EAAE6O,gBAAT;AACH;AACD,YAAG,CAAClP,EAAEwD,QAAF,CAAWnD,EAAEuQ,UAAb,EAAyBN,cAAzB,CAAJ,EAA8C;AAC1C,mBAAOjQ,EAAE6O,gBAAT;AACH;AACD,YAAG,CAACjG,IAAJ,EAAU;AACN,gBAAI4H,MAAM,CAAV;AACA,eAAG;AACC5H,uBAAO,SAAO4H,GAAd;AACAA;AACH,aAHD,QAIM7Q,EAAEoK,GAAF,CAAMtJ,SAASqK,KAAf,EAAsB,EAAClC,UAAD,EAAtB,KAAiChI,iBAAiB6P,OAAjB,CAAyB7H,IAAzB,KAAkC,CAAC,CAJ1E;AAKH;AACD,YAAGjJ,EAAEoK,GAAF,CAAMtJ,SAASqK,KAAf,EAAsB,EAAClC,UAAD,EAAtB,KAAiChI,iBAAiB6P,OAAjB,CAAyB7H,IAAzB,KAAkC,CAAC,CAAvE,EAA0E;AACtE,mBAAO5I,EAAE0Q,eAAT;AACH;AACD,YAAG9H,KAAKlC,MAAL,GAAc,EAAjB,EAAqB;AACjB,mBAAO1G,EAAE6O,gBAAT;AACH;;AAEDjO,yBAAiBiE,IAAjB,CAAsB+D,IAAtB;;AAEAlI,gBAAQyP,IAAR,CAAarF,KAAb,CAAmBlC,IAAnB,IAA2B,IAAIlI,QAAQiQ,IAAZ,CAAiB/H,IAAjB,EAAuBoH,KAAvB,EAA8BC,cAA9B,EAA8C,KAAKrH,IAAnD,EAAyDlG,CAAzD,EAA4DD,CAA5D,CAA3B;;AAEAjC,gBAAQoQ,UAAR,CAAmB,MAAnB,EAA2B,YAA3B,EAAyC,EAAC9K,UAAU,KAAK8C,IAAhB,EAAsBlG,IAAtB,EAAyBD,IAAzB,EAA4BmG,UAA5B,EAAkCoH,YAAlC,EAAyCC,8BAAzC,EAAzC;;AAEA,eAAOrH,IAAP;AACH,KAhD2B,CAA5B;;AAkDAR,SAAKqD,SAAL,CAAeoF,sBAAf,GAAwCpQ,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8BxK,aAA9B,EAA6C;AAAA,qCACrF3D,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADqF;AAAA;AAAA,YAC5FgC,CAD4F;AAAA,YAC1FD,CAD0F;;AAGjG,YAAG9C,EAAEoE,WAAF,CAAcrB,CAAd,KAAoB/C,EAAEoE,WAAF,CAActB,CAAd,CAApB,IAAwCC,IAAI,CAA5C,IAAiDA,IAAI,EAArD,IAA2DD,IAAI,CAA/D,IAAoEA,IAAI,EAA3E,EAA+E;AAC3E,mBAAOzC,EAAE6O,gBAAT;AACH;AACD,YAAGlP,EAAEmR,QAAF,CAAW9C,SAAX,KAAyBrO,EAAEoE,WAAF,CAAcP,aAAd,CAA5B,EAA0D;AACtDA,4BAAgBwK,SAAhB;AACH;AACD,YAAG,CAAChO,EAAE+Q,iBAAF,CAAoBvN,aAApB,CAAJ,EAAwC;AACpC,mBAAOxD,EAAE6O,gBAAT;AACH;AACD,YAAG,KAAK9J,UAAL,IAAmB,KAAKA,UAAL,CAAgBiM,KAAhB,GAAwB,CAA3C,IAAgD,CAAC,KAAKjM,UAAL,CAAgBE,EAApE,EAAwE;AACpE,mBAAOjF,EAAEiR,kBAAT;AACH;AACD,YAAG,CAACpR,MAAMqR,2BAAN,CAAkC1N,aAAlC,EAAiD/C,SAASyC,aAAT,CAAuB,KAAK0F,IAA5B,CAAjD,EAAoF,KAAK7D,UAAzF,CAAJ,EAA0G;AACtG,mBAAO/E,EAAEiR,kBAAT;AACH;AACD,YAAG,CAACpR,MAAMsR,qBAAN,CAA4B1Q,SAASyC,aAAT,CAAuB,KAAK0F,IAA5B,CAA5B,EAA+DpF,aAA/D,EAA8Ed,CAA9E,EAAiFD,CAAjF,CAAD,IACC,CAAC5C,MAAMsR,qBAAN,CAA4B5Q,YAAYqC,iBAAZ,CAA8B,KAAKgG,IAAnC,CAA5B,EAAsEpF,aAAtE,EAAqFd,CAArF,EAAwFD,CAAxF,CADL,EACiG;AAC7F,mBAAOzC,EAAEoR,kBAAT;AACH;AACD,YAAG,KAAKvI,IAAL,IAAa7I,EAAEgJ,UAAlB,EAA8B;AAC1B,mBAAOhJ,EAAEoR,kBAAT;AACH;;AAED,YAAGzR,EAAEY,YAAY8Q,WAAd,EAA2B7J,MAA3B,CAAkC,EAACpE,MAAM,kBAAP,EAAlC,EAA8D8M,IAA9D,KAAuEnP,wBAAvE,IAAmGf,EAAEsR,sBAAxG,EAAgI;AAC5H,mBAAOtR,EAAEqQ,QAAT;AACH;;AAED,YAAIkB,SAAS,EAACzL,UAAU,KAAK8C,IAAhB,EAAsBlG,IAAtB,EAAyBD,IAAzB,EAA4Be,4BAA5B,EAAb;;AAEA,YAAGA,iBAAiB,OAApB,EAA6B;AACzB,gBAAIgN,MAAM,CAAV;AAAA,gBAAa5H,IAAb;AACA,eAAG;AACCA,uBAAO,UAAU4H,GAAjB;AACAA;AACH,aAHD,QAIO7Q,EAAEoK,GAAF,CAAMtJ,SAAS+Q,MAAf,EAAuB,EAAC5I,UAAD,EAAvB,KACPjJ,EAAEoK,GAAF,CAAMtJ,SAASuK,iBAAf,EAAkC,EAACxH,eAAe,OAAhB,EAAyBoF,UAAzB,EAAlC,CADO,IAEP/H,kBAAkB4P,OAAlB,CAA0B7H,IAA1B,KAAmC,CAAC,CANpC;;AAQA/H,8BAAkBgE,IAAlB,CAAuB+D,IAAvB;;AAEA2I,mBAAO3I,IAAP,GAAcA,IAAd;AACH;;AAED7H;;AAEAP,gBAAQoQ,UAAR,CAAmB,MAAnB,EAA2B,wBAA3B,EAAqDW,MAArD;;AAEA,eAAOvR,EAAEyR,EAAT;AACH,KApDuC,CAAxC;;AAsDArJ,SAAKqD,SAAL,CAAeiG,WAAf,GAA6BjR,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAelC,IAAf,EAAqB;AAC9D,YAAII,GAAJ;;AAEAJ,eAAOA,QAAQ,EAAf;;AAEA,YAAGvB,EAAEoE,WAAF,CAAcX,IAAd,CAAH,EAAwB;AACpB,kBAAM,IAAIO,KAAJ,CAAU,+BAAV,CAAN;AACH;;AAED,YAAG,CAACzC,KAAKsG,MAAN,IAAgB7H,EAAE2E,QAAF,CAAWlB,IAAX,CAAnB,EAAqC;AACjC9B,kBAAM8B,IAAN;AACH,SAFD,MAGK;AACD,gBAAGzD,EAAE2E,QAAF,CAAWlB,IAAX,CAAH,EAAqB;AACjBA,uBAAO,KAAKmE,IAAL,CAAUnE,IAAV,EAAgBlC,IAAhB,CAAP;AACH;;AAEDI,kBAAMR,aAAa,KAAK8H,IAAlB,EAAwBrE,iBAAxB,CAA0CjD,GAA1C,CAA8C8B,IAA9C,CAAN;;AAEAtC,yBAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmC5C,GAAnC,IAA0CR,aAAa,KAAK8H,IAAlB,EAAwBrE,iBAAxB,CAA0CkF,KAA1C,CAAgDnI,GAAhD,CAA1C;AACH;;AAED,YAAG,CAACR,aAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmC5C,GAAnC,CAAJ,EAA6C;AACzCR,yBAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmC5C,GAAnC,IAA0C3B,EAAEyC,KAAF,CAAQgB,IAAR,CAA1C;AACA,gBAAIzD,EAAE2E,QAAF,CAAWlB,IAAX,CAAJ,EAAsB;AAClBtC,6BAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmC5C,GAAnC,IAA0C,KAAKiG,IAAL,CAAUnE,IAAV,EAAgBlC,IAAhB,CAA1C;AACH;AACJ;AACD,eAAO,EAACI,QAAD,EAAMgG,SAASxG,aAAa,KAAK8H,IAAlB,EAAwB1E,UAAxB,CAAmC5C,GAAnC,CAAf,EAAP;AACH,KA7B4B,CAA7B;;AA+BA8G,SAAKqD,SAAL,CAAekG,UAAf,GAA4BlR,SAAS6H,MAAT,CAAgB,UAASsJ,IAAT,EAAe;AACvD,eAAOnR,SAASmH,GAAT,CAAaiK,QAAb,CAAsB,KAAKjJ,IAA3B,EAAiCgJ,IAAjC,CAAP;AACH,KAF2B,CAA5B;;AAIAlR,YAAQ0H,IAAR,GAAeA,IAAf;;AAEA;;;;;;AAMA,QAAIkD,aAAa7K,SAAS6H,MAAT,CAAgB,UAASxC,QAAT,EAAmB;AAChD,aAAKA,QAAL,GAAgBA,QAAhB;AACH,KAFgB,CAAjB;;AAIAwF,eAAWG,SAAX,CAAqBqG,MAArB,GAA8BrR,SAAS6H,MAAT,CAAgB,UAAS5F,CAAT,EAAWD,CAAX,EAAasP,KAAb,EAAoB;AAC9D,YAAG,QAAOrP,CAAP,yCAAOA,CAAP,MAAY,QAAf,EAAyB;AACrBqP,oBAAQtP,CAAR;AACAA,gBAAIC,EAAED,CAAN;AACAC,gBAAIA,EAAEA,CAAN;AACH;AACDhC,gBAAQsR,OAAR,CAAgBC,SAAhB,CAA0B,KAAKnM,QAA/B,EAAyC,EAACoM,GAAG,GAAJ,EAASxP,IAAT,EAAWD,IAAX,EAAa0P,GAAEJ,KAAf,EAAzC;AACA,eAAO,IAAP;AACH,KAR6B,CAA9B;;AAUAzG,eAAWG,SAAX,CAAqB2G,IAArB,GAA4B3R,SAAS6H,MAAT,CAAgB,UAAS+J,EAAT,EAAYC,EAAZ,EAAeC,EAAf,EAAkBC,EAAlB,EAAqBT,KAArB,EAA4B;AACpE,YAAG,QAAOM,EAAP,yCAAOA,EAAP,MAAa,QAAb,IAAyB,QAAOC,EAAP,yCAAOA,EAAP,MAAa,QAAzC,EAAmD;AAC/CP,oBAAQQ,EAAR;AACAA,iBAAKD,GAAG5P,CAAR;AACA8P,iBAAKF,GAAG7P,CAAR;AACA6P,iBAAKD,GAAG5P,CAAR;AACA4P,iBAAKA,GAAG3P,CAAR;AACH;AACDhC,gBAAQsR,OAAR,CAAgBC,SAAhB,CAA0B,KAAKnM,QAA/B,EAAyC,EAACoM,GAAG,GAAJ,EAASG,MAAT,EAAYC,MAAZ,EAAeC,MAAf,EAAkBC,MAAlB,EAAqBL,GAAEJ,KAAvB,EAAzC;AACA,eAAO,IAAP;AACH,KAV2B,CAA5B;;AAYAzG,eAAWG,SAAX,CAAqBgH,IAArB,GAA4BhS,SAAS6H,MAAT,CAAgB,UAAS5F,CAAT,EAAWD,CAAX,EAAaiQ,CAAb,EAAeC,CAAf,EAAiBZ,KAAjB,EAAwB;AAChE,YAAG,QAAOrP,CAAP,yCAAOA,CAAP,MAAY,QAAf,EAAyB;AACrBqP,oBAAQY,CAAR;AACAA,gBAAID,CAAJ;AACAA,gBAAIjQ,CAAJ;AACAA,gBAAIC,EAAED,CAAN;AACAC,gBAAIA,EAAEA,CAAN;AACH;AACDhC,gBAAQsR,OAAR,CAAgBC,SAAhB,CAA0B,KAAKnM,QAA/B,EAAyC,EAACoM,GAAG,GAAJ,EAASxP,IAAT,EAAWD,IAAX,EAAaiQ,IAAb,EAAeC,IAAf,EAAiBR,GAAEJ,KAAnB,EAAzC;AACA,eAAO,IAAP;AACH,KAV2B,CAA5B;;AAYAzG,eAAWG,SAAX,CAAqBmH,IAArB,GAA4BnS,SAAS6H,MAAT,CAAgB,UAASuK,MAAT,EAAgBd,KAAhB,EAAuB;AAC/Dc,iBAASA,OAAOjL,GAAP,CAAW;AAAA,mBAAKhE,EAAElB,CAAF,KAAQkD,SAAR,GAAoB,CAAChC,EAAElB,CAAH,EAAMkB,EAAEnB,CAAR,CAApB,GAAiCmB,CAAtC;AAAA,SAAX,CAAT;AACAlD,gBAAQsR,OAAR,CAAgBC,SAAhB,CAA0B,KAAKnM,QAA/B,EAAyC,EAACoM,GAAG,GAAJ,EAASW,cAAT,EAAgBV,GAAEJ,KAAlB,EAAzC;AACA,eAAO,IAAP;AACH,KAJ2B,CAA5B;;AAMAzG,eAAWG,SAAX,CAAqBqH,IAArB,GAA4BrS,SAAS6H,MAAT,CAAgB,UAASwK,IAAT,EAAcpQ,CAAd,EAAgBD,CAAhB,EAAkBsP,KAAlB,EAAyB;AACjE,YAAG,QAAOrP,CAAP,yCAAOA,CAAP,MAAY,QAAf,EAAyB;AACrBqP,oBAAQtP,CAAR;AACAA,gBAAIC,EAAED,CAAN;AACAC,gBAAIA,EAAEA,CAAN;AACH;AACDhC,gBAAQsR,OAAR,CAAgBC,SAAhB,CAA0B,KAAKnM,QAA/B,EAAyC,EAACoM,GAAG,GAAJ,EAASY,UAAT,EAAcpQ,IAAd,EAAgBD,IAAhB,EAAkB0P,GAAEJ,KAApB,EAAzC;AACA,eAAO,IAAP;AACH,KAR2B,CAA5B;;AAUAzG,eAAWG,SAAX,CAAqBsH,OAArB,GAA+BtS,SAAS6H,MAAT,CAAgB,YAAW;AACtD,eAAO5H,QAAQsR,OAAR,CAAgBgB,aAAhB,CAA8B,KAAKlN,QAAnC,CAAP;AACH,KAF8B,CAA/B;;AAIAwF,eAAWG,SAAX,CAAqBwH,KAArB,GAA6BxS,SAAS6H,MAAT,CAAgB,YAAW;AACpD5H,gBAAQsR,OAAR,CAAgBkB,WAAhB,CAA4B,KAAKpN,QAAjC;AACA,eAAO,IAAP;AACH,KAH4B,CAA7B;;AAKApF,YAAQ4K,UAAR,GAAqBA,UAArB;AACH,CAtvBD;;AAwvBAxD,QAAQqL,OAAR,GAAkB,UAASjL,SAAT,EAAoB;;AAElCzH,eAAWyH,SAAX;;AAEA,QAAGxH,QAAQsD,YAAX,EAAyB;AACrB;AACH;;AAED;;;;;;;AAOA,QAAIA,eAAevD,SAAS6H,MAAT,CAAgB,UAAS5F,CAAT,EAAYD,CAAZ,EAAeqD,QAAf,EAAyB;;AAExDpD,YAAI,CAACA,CAAL;AACAD,YAAI,CAACA,CAAL;;AAEA,YAAG9C,EAAEyT,KAAF,CAAQ1Q,CAAR,KAAc/C,EAAEyT,KAAF,CAAQ3Q,CAAR,CAAd,IAA4B,CAAC9C,EAAEmR,QAAF,CAAWhL,QAAX,CAAhC,EAAsD;AAClD,kBAAM,IAAInC,KAAJ,CAAU,+CAAV,CAAN;AACH;;AAED,aAAKjB,CAAL,GAASA,CAAT;AACA,aAAKD,CAAL,GAASA,CAAT;AACA,aAAKqD,QAAL,GAAgBA,QAAhB;AACH,KAZkB,CAAnB;;AAcA9B,iBAAayH,SAAb,CAAuBC,QAAvB,GAAkCjL,SAAS6H,MAAT,CAAgB,YAAW;AACzD,0BAAgB,KAAKxC,QAArB,aAAqC,KAAKpD,CAA1C,SAA+C,KAAKD,CAApD;AACH,KAFiC,CAAlC;;AAIAuB,iBAAayH,SAAb,CAAuB4H,SAAvB,GAAmC5S,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8BsF,QAA9B,EAAwC;AACvF,YAAI5Q,IAAIqL,QAAR;AAAA,YAAkBtL,IAAIuL,SAAtB;AAAA,YAAiCxH,QAAQ8M,QAAzC;AAAA,YAAmDxN,WAAW,KAAKA,QAAnE;AACA,YAAGnG,EAAEoE,WAAF,CAAcuP,QAAd,CAAH,EAA4B;AACxB,gBAAIzP,MAAMkK,QAAV;AACA,gBAAGlK,IAAIA,GAAP,EAAY;AACRA,sBAAMA,IAAIA,GAAV;AACH;AACDnB,gBAAImB,IAAInB,CAAR;AACAD,gBAAIoB,IAAIpB,CAAR;AACAqD,uBAAWjC,IAAIiC,QAAf;AACAU,oBAAQwH,SAAR;AACH;;AAED,eAAO7N,IAAIuC,IAAI,KAAKA,CAAb,KAAmB8D,KAAnB,IAA4BrG,IAAIsC,IAAI,KAAKA,CAAb,KAAmB+D,KAA/C,IAAwDV,YAAY,KAAKA,QAAhF;AACH,KAdkC,CAAnC;;AAgBA9B,iBAAayH,SAAb,CAAuB9E,QAAvB,GAAkClG,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B;AAAA,qCACvDnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADuD;AAAA;AAAA,YACvEgC,CADuE;AAAA,YACrED,CADqE;AAAA,YACnEqD,QADmE;;AAE5E,eAAO3F,IAAIuC,IAAI,KAAKA,CAAb,KAAmB,CAAnB,IAAwBvC,IAAIsC,IAAI,KAAKA,CAAb,KAAmB,CAA3C,KAAiD,CAACqD,QAAD,IAAaA,YAAY,KAAKA,QAA/E,CAAP;AACH,KAHiC,CAAlC;;AAKA9B,iBAAayH,SAAb,CAAuB8H,cAAvB,GAAwC9S,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B;AAAA,sCACtEnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADsE;AAAA;AAAA,YAC7EgC,CAD6E;AAAA,YAC3ED,CAD2E;;AAElF,eAAO5C,MAAMsH,YAAN,CAAmBzE,IAAI,KAAKA,CAA5B,EAA+BD,IAAI,KAAKA,CAAxC,CAAP;AACH,KAHuC,CAAxC;;AAKAuB,iBAAayH,SAAb,CAAuB+H,UAAvB,GAAoC/S,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B9M,IAA9B,EAAoC;AAAA,sCAE/DrB,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CAF+D;AAAA;AAAA,YAE/EgC,CAF+E;AAAA,YAE7ED,CAF6E;AAAA,YAE3EqD,QAF2E;AAAA,YAGhF8L,IAHgF,GAGzEnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAHyE;;AAKpF,YAAGnG,EAAEmE,QAAF,CAAWkK,SAAX,CAAH,EAA0B;AACtB9M,mBAAOvB,EAAEyC,KAAF,CAAQ4L,SAAR,CAAP;AACH;AACD9M,eAAOA,QAAQ,EAAf;;AAEA4E,mBAAWA,YAAY,KAAKA,QAA5B;;AAEA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;;AAED,YAAGA,YAAY,KAAKA,QAAjB,IAA6BrF,SAASwO,iBAAzC,EAA4D;AACxD,mBAAO2C,KAAK5C,QAAL,CAAc,IAAd,EAAoB,IAAItO,QAAQsD,YAAZ,CAAyBtB,CAAzB,EAA2BD,CAA3B,EAA6BqD,QAA7B,CAApB,EAA4D5E,IAA5D,CAAP;AACH,SAFD,MAGK;AACD,gBAAIuS,UAAU7B,KAAKD,UAAL,CAAgB7L,QAAhB,CAAd;AACA,gBAAG2N,UAAU,CAAb,EAAgB;AACZ,uBAAO,EAAP;AACH;AACD,gBAAIC,OAAO,KAAKC,iBAAL,CAAuBF,OAAvB,EAAgCvS,IAAhC,CAAX;AACA,gBAAG,CAACwS,IAAJ,EAAU;AACN,uBAAO,EAAP;AACH;AACD,mBAAO9B,KAAK5C,QAAL,CAAc,IAAd,EAAoB0E,IAApB,EAA0BxS,IAA1B,CAAP;AACH;AAEJ,KA/BmC,CAApC;;AAiCA8C,iBAAayH,SAAb,CAAuBkI,iBAAvB,GAA2ClT,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAelC,IAAf,EAAqB;AAAA;;AAE5EA,eAAOvB,EAAEyC,KAAF,CAAQlB,QAAQ,EAAhB,CAAP;;AAEA,YAAI0Q,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;;AAEA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;;AAED,YAAGnG,EAAEoE,WAAF,CAAcX,IAAd,CAAH,EAAwB;AACpB,mBAAO,IAAP;AACH;;AAED,YAAG3C,SAASwO,iBAAZ,EAA+B;AAC3B,mBAAO5H,oBAAoB,IAApB,EAA0BjE,IAA1B,EAAgClC,IAAhC,CAAP;AACH;;AAEDA,aAAKwE,SAAL,GAAiB,KAAjB;;AAEA,YAAIqB,SAAS,IAAb;AAAA,YACI6M,MADJ;AAAA,YAEIC,WAAWjC,KAAKF,WAAL,CAAiBtO,IAAjB,EAAuBlC,IAAvB,CAFf;;AAIA,YAAG,CAACA,KAAK4S,SAAT,EAAoB;;AAEhB,gBAAIC,IAAJ;AAAA,gBAAUC,OAAO,CAAjB;;AAEAH,qBAASvM,OAAT,CAAiBtE,OAAjB,CAAyB,UAACY,CAAD,EAAO;AAC5B,oBAAIlB,IAAIkB,EAAElB,CAAV;AAAA,oBAAaD,IAAImB,EAAEnB,CAAnB;AAAA,oBAAsBqD,WAAWlC,EAAEkC,QAAnC;AACA,oBAAGlC,EAAEC,GAAL,EAAU;AACNnB,wBAAIkB,EAAEC,GAAF,CAAMnB,CAAV;AACAD,wBAAImB,EAAEC,GAAF,CAAMpB,CAAV;AACAqD,+BAAWlC,EAAEC,GAAF,CAAMiC,QAAjB;AACH;AACD,oBAAI6M,IAAIrS,IAAIH,IAAI,OAAKuC,CAAL,GAASA,CAAb,CAAJ,EAAqBvC,IAAI,OAAKsC,CAAL,GAASA,CAAb,CAArB,CAAR;AACA,oBAAG9C,EAAEoE,WAAF,CAAcgQ,IAAd,KAAuBA,OAAOpB,CAAjC,EAAoC;AAChCoB,2BAAOpB,CAAP;AACH;AACDqB,wBAAQrB,CAAR;AACH,aAZD;;AAcAzR,iBAAK4S,SAAL,GAAiBE,OAAOD,OAAK,EAAZ,GAAiB,UAAjB,GAA8B,OAA/C;AACH;;AAED,YAAG7S,KAAK4S,SAAL,IAAkB,UAArB,EAAiC;;AAE7BF,qBAAS,CAAT;;AAEAC,qBAASvM,OAAT,CAAiBtE,OAAjB,CAAyB,UAACY,CAAD,EAAO;AAC5B,oBAAIqQ,WAAW,OAAKxO,SAAL,CAAe7B,CAAf,IAAoB,CAAC,CAArB,GACX,OAAK+C,QAAL,CAAc/C,CAAd,IAAmB,CAAnB,GAAuB,CAD3B;AAEA,oBAAGqQ,WAAWL,MAAd,EAAsB;AAClB7M,6BAASnD,CAAT;AACAgQ,6BAASK,QAAT;AACH;AACJ,aAPD;;AASA,gBAAGL,UAAU,CAAb,EAAgB;AACZ,oBAAInN,OAAOmL,KAAK5C,QAAL,CAAc,IAAd,EAAoB6E,SAASvS,GAA7B,EAAkCJ,IAAlC,CAAX;AACA,oBAAGuF,KAAKC,MAAL,GAAc,CAAjB,EAAoB;AAChB,wBAAIoJ,WAAWrJ,KAAKA,KAAKC,MAAL,GAAY,CAAjB,CAAf;AAAA,wBACIwN,cAActC,KAAKhF,aAAL,CAAmBkD,SAASpN,CAA5B,EAA+BoN,SAASrN,CAAxC,CADlB;AAEAsE,6BAASpH,EAAE4H,IAAF,CAAOsM,SAASvM,OAAhB,EAAyB,UAAC1D,CAAD;AAAA,+BAAOsQ,YAAYzO,SAAZ,CAAsB7B,CAAtB,CAAP;AAAA,qBAAzB,CAAT;AACH;AACJ;AACJ;;AAED,YAAG1C,KAAK4S,SAAL,IAAkB,OAArB,EAA8B;;AAE1BD,qBAASvM,OAAT,CAAiBtE,OAAjB,CAAyB,UAACY,CAAD,EAAO;;AAE5B,oBAAI6C,IAAJ;AAAA,oBACIwN,WAAW,OAAKxO,SAAL,CAAe7B,CAAf,IAAoB,CAAC,CAArB,GACP,OAAK+C,QAAL,CAAc/C,CAAd,IAAmB,CAAnB,GACI,CAAC6C,OAAO,OAAK+M,UAAL,CAAgB5P,CAAhB,EAAmB1C,IAAnB,CAAR,KAAqCuF,KAAKC,MAAL,GAAc,CAAnD,IACAkL,KAAKhF,aAAL,CAAmBnG,KAAKA,KAAKC,MAAL,GAAc,CAAnB,EAAsBhE,CAAzC,EAA4C+D,KAAKA,KAAKC,MAAL,GAAc,CAAnB,EAAsBjE,CAAlE,EAAqEkE,QAArE,CAA8E/C,CAA9E,CADA,GAEI6C,KAAKC,MAFT,GAEkBd,SAL9B;;AAOA,oBAAI,CAACjG,EAAEoE,WAAF,CAAc6P,MAAd,KAAyBK,YAAYL,MAAtC,KAAiD,CAACjU,EAAEoE,WAAF,CAAckQ,QAAd,CAAtD,EAA+E;AAC3EL,6BAASK,QAAT;AACAlN,6BAASnD,CAAT;AACH;AACJ,aAbD;AAcH;;AAED,eAAOmD,MAAP;AACH,KAvF0C,CAA3C;;AAyFA/C,iBAAayH,SAAb,CAAuB0I,WAAvB,GAAqC1T,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAeoD,KAAf,EAAsBtF,IAAtB,EAA4B;AAAA;;AAC7E,YAAI0Q,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;;AAEA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;;AAED5E,eAAOvB,EAAEyC,KAAF,CAAQlB,QAAQ,EAAhB,CAAP;;AAEA,YAAIoG,UAAU,EAAd;AAAA,YACIP,SAAS,EADb;;AAGA,YAAGpH,EAAE2E,QAAF,CAAWlB,IAAX,CAAH,EAAqB;AACjBkE,sBAAUsK,KAAKrK,IAAL,CAAUnE,IAAV,EAAgBlC,IAAhB,CAAV;AACH;AACD,YAAGvB,EAAE+D,OAAF,CAAUN,IAAV,CAAH,EAAoB;AAChBkE,sBAAUpG,KAAKsG,MAAL,GAAc7H,EAAE6H,MAAF,CAASpE,IAAT,EAAelC,KAAKsG,MAApB,CAAd,GAA4CpE,IAAtD;AACH;;AAEDkE,gBAAQtE,OAAR,CAAgB,UAACY,CAAD,EAAO;AACnB,gBAAG,OAAKyP,SAAL,CAAezP,CAAf,EAAkB4C,KAAlB,CAAH,EAA6B;AACzBO,uBAAOlC,IAAP,CAAYjB,CAAZ;AACH;AACJ,SAJD;;AAMA,eAAOmD,MAAP;AACH,KA1BoC,CAArC;;AA4BA/C,iBAAayH,SAAb,CAAuB2I,kBAAvB,GAA4C3T,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAelC,IAAf,EAAqB;AAAA;;AAC7E,YAAI0Q,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;;AAEA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;;AAED5E,eAAOvB,EAAEyC,KAAF,CAAQlB,QAAQ,EAAhB,CAAP;;AAEA,YAAIoG,UAAU,EAAd;AAAA,YACAP,SAAS,EADT;;AAGA,YAAGpH,EAAE2E,QAAF,CAAWlB,IAAX,CAAH,EAAqB;AACjBkE,sBAAUsK,KAAKrK,IAAL,CAAUnE,IAAV,EAAgBlC,IAAhB,CAAV;AACH;AACD,YAAGvB,EAAE+D,OAAF,CAAUN,IAAV,CAAH,EAAoB;AAChBkE,sBAAUpG,KAAKsG,MAAL,GAAc7H,EAAE6H,MAAF,CAASpE,IAAT,EAAelC,KAAKsG,MAApB,CAAd,GAA4CpE,IAAtD;AACH;;AAED,YAAIiR,UAAU,IAAd;AAAA,YAAoBC,WAAWC,QAA/B;;AAEAjN,gBAAQtE,OAAR,CAAgB,UAACY,CAAD,EAAO;AACnB,gBAAI4C,QAAQ,OAAKgO,UAAL,CAAgB5Q,CAAhB,CAAZ;AACA,gBAAG4C,QAAQ8N,QAAX,EAAqB;AACjBA,2BAAW9N,KAAX;AACA6N,0BAAUzQ,CAAV;AACH;AACJ,SAND;;AAQA,eAAOyQ,OAAP;AACH,KA9B2C,CAA5C;;AAgCArQ,iBAAayH,SAAb,CAAuBhG,SAAvB,GAAmChF,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B;AAAA,sCACxDnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADwD;AAAA;AAAA,YACxEgC,CADwE;AAAA,YACtED,CADsE;AAAA,YACpEqD,QADoE;;AAE7E,eAAOpD,KAAK,KAAKA,CAAV,IAAeD,KAAK,KAAKA,CAAzB,KAA+B,CAACqD,QAAD,IAAaA,YAAY,KAAKA,QAA7D,CAAP;AACH,KAHkC,CAAnC;;AAKA9B,iBAAayH,SAAb,CAAuB+I,UAAvB,GAAoC/T,SAAS6H,MAAT,CAAgB,UAASyF,QAAT,EAAmBC,SAAnB,EAA8B;AAAA,sCACzDnO,MAAMoO,gBAAN,CAAuBF,QAAvB,EAAiCC,SAAjC,EAA4CtN,OAA5C,CADyD;AAAA;AAAA,YACzEgC,CADyE;AAAA,YACvED,CADuE;AAAA,YACrEqD,QADqE;;AAE9E,YAAGA,YAAYA,YAAY,KAAKA,QAAhC,EAA0C;AACtC,mBAAOyO,QAAP;AACH;AACD,eAAOjU,IAAIH,IAAI,KAAKuC,CAAL,GAASA,CAAb,CAAJ,EAAqBvC,IAAI,KAAKsC,CAAL,GAASA,CAAb,CAArB,CAAP;AACH,KANmC,CAApC;;AAQAuB,iBAAayH,SAAb,CAAuBgJ,IAAvB,GAA8BhU,SAAS6H,MAAT,CAAgB,YAAW;AACrD,YAAIsJ,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;AACA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;AACD,eAAO8L,KAAK9D,MAAL,CAAY,IAAZ,CAAP;AACH,KAN6B,CAA9B;;AAQA9J,iBAAayH,SAAb,CAAuBiJ,OAAvB,GAAiCjU,SAAS6H,MAAT,CAAgB,UAASlF,IAAT,EAAe;AAC5D,YAAGA,QAAQ,SAAX,EAAsB;AAClB,mBAAO,CAAC3C,SAASmH,GAAT,CAAa+M,YAAb,CAA0B,IAA1B,CAAD,CAAP;AACH;AACD,YAAI/C,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;AACA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;AACD,eAAO8L,KAAKhD,SAAL,CAAexL,IAAf,EAAqB,IAArB,CAAP;AACH,KATgC,CAAjC;;AAWAY,iBAAayH,SAAb,CAAuBsE,UAAvB,GAAoCtP,SAAS6H,MAAT,CAAgB,UAASM,IAAT,EAAeoH,KAAf,EAAsBC,cAAtB,EAAsC;AACtF,YAAI2B,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;AACA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;AACD,eAAO8L,KAAK7B,UAAL,CAAgB,IAAhB,EAAsBnH,IAAtB,EAA4BoH,KAA5B,EAAmCC,cAAnC,CAAP;AACH,KANmC,CAApC;;AAQAjM,iBAAayH,SAAb,CAAuBoF,sBAAvB,GAAgDpQ,SAAS6H,MAAT,CAAgB,UAAS9E,aAAT,EAAwB;AACpF,YAAIoO,OAAOnR,SAASqE,KAAT,CAAe,KAAKgB,QAApB,CAAX;AACA,YAAG,CAAC8L,IAAJ,EAAU;AACN,kBAAM,IAAIjO,KAAJ,4BAAmC,KAAKmC,QAAxC,CAAN;AACH;AACD,eAAO8L,KAAKf,sBAAL,CAA4B,IAA5B,EAAkCrN,aAAlC,CAAP;AACH,KAN+C,CAAhD;;AAQA9C,YAAQsD,YAAR,GAAuBA,YAAvB;;AAGA;;;;;;;AAOA,QAAI4Q,aAAanU,SAAS6H,MAAT,CAAgB,UAAS5F,CAAT,EAAYD,CAAZ,EAAemP,IAAf,EAAqB;AAClD,aAAKA,IAAL,GAAYnR,SAASqE,KAAT,CAAe8M,IAAf,CAAZ;AACA,aAAK/N,GAAL,GAAW,IAAInD,QAAQsD,YAAZ,CAAyBtB,CAAzB,EAA2BD,CAA3B,EAA6BmP,IAA7B,CAAX;AACH,KAHgB,CAAjB;;AAKAlR,YAAQkU,UAAR,GAAqBA,UAArB;AACH,CAjTD","file":"../../game/rooms.js","sourceRoot":"/src"}