{"version":3,"sources":["processor/intents/creeps/tick.js"],"names":["_","require","utils","driver","getDriver","C","constants","movement","_applyDamage","object","damage","damageReduce","damageEffective","any","body","i","boost","length","bodyPart","damageRatio","BOOSTS","type","bodyPartHitsEffective","hits","Math","min","round","module","exports","roomObjects","roomTerrain","bulk","bulkUsers","roomController","stats","gameTime","spawning","spawn","find","x","y","remove","_id","name","execute","user","roomNameToXY","room","roomX","roomY","getRoomNameFromXY","update","interRoom","portal","destination","tutorial","ageTime","CLAIM","CREEP_CLAIM_LIFE_TIME","CREEP_LIFE_TIME","RESOURCES_ALL","forEach","amount","resourceType","isEqual","actionLog","_actionLog","fatigue","moves","calcBodyEffectiveness","MOVE","isNaN","userSummoned","oldHits","_damageToApply","_healToApply","hitsMax","energyCapacity"],"mappings":"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","file":"../../../../processor/intents/creeps/tick.js","sourceRoot":"/src"}